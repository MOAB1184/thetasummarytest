{"ast":null,"code":"import mysql from 'mysql2/promise';\nimport dotenv from 'dotenv';\ndotenv.config();\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass Database {\n  constructor() {\n    // Add debugging\n    console.log('Database Configuration:', {\n      host: process.env.DB_HOST,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD ? '****' : 'not set',\n      database: process.env.DB_NAME\n    });\n    this.pool = mysql.createPool({\n      host: process.env.DB_HOST || 'localhost',\n      user: process.env.DB_USER || 'root',\n      password: process.env.DB_PASSWORD || '',\n      database: process.env.DB_NAME || 'theta_db',\n      waitForConnections: true,\n      connectionLimit: 10,\n      queueLimit: 0\n    });\n  }\n  async initialize() {\n    try {\n      // Create database if it doesn't exist\n      const connection = await mysql.createConnection({\n        host: process.env.DB_HOST || 'localhost',\n        user: process.env.DB_USER || 'root',\n        password: process.env.DB_PASSWORD || ''\n      });\n      await connection.query(`CREATE DATABASE IF NOT EXISTS ${process.env.DB_NAME || 'theta_db'}`);\n      await connection.end();\n\n      // Create tables\n      await this.createTables();\n      console.log('Database initialized successfully');\n    } catch (error) {\n      console.error('Error initializing database:', error);\n      throw error;\n    }\n  }\n  async createTables() {\n    const connection = await this.pool.getConnection();\n    try {\n      await connection.beginTransaction();\n\n      // Create schools table\n      await connection.query(`\n                CREATE TABLE IF NOT EXISTS schools (\n                    id BIGINT PRIMARY KEY,\n                    name VARCHAR(255) NOT NULL UNIQUE,\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n                )\n            `);\n\n      // Create users table\n      await connection.query(`\n                CREATE TABLE IF NOT EXISTS users (\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n                    email VARCHAR(255) NOT NULL UNIQUE,\n                    name VARCHAR(255) NOT NULL,\n                    password VARCHAR(255) NOT NULL,\n                    role ENUM('teacher', 'student') NOT NULL,\n                    school_id BIGINT,\n                    approved BOOLEAN DEFAULT FALSE,\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n                    FOREIGN KEY (school_id) REFERENCES schools(id)\n                )\n            `);\n\n      // Create classes table\n      await connection.query(`\n                CREATE TABLE IF NOT EXISTS classes (\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n                    code VARCHAR(50) NOT NULL,\n                    name VARCHAR(255) NOT NULL,\n                    teacher_id BIGINT NOT NULL,\n                    school_id BIGINT NOT NULL,\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n                    FOREIGN KEY (teacher_id) REFERENCES users(id),\n                    FOREIGN KEY (school_id) REFERENCES schools(id),\n                    UNIQUE KEY unique_class_code (code, school_id)\n                )\n            `);\n\n      // Create student_class_enrollments table\n      await connection.query(`\n                CREATE TABLE IF NOT EXISTS student_class_enrollments (\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n                    student_id BIGINT NOT NULL,\n                    class_id BIGINT NOT NULL,\n                    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n                    FOREIGN KEY (student_id) REFERENCES users(id),\n                    FOREIGN KEY (class_id) REFERENCES classes(id),\n                    UNIQUE KEY unique_enrollment (student_id, class_id)\n                )\n            `);\n\n      // Create class_join_requests table\n      await connection.query(`\n                CREATE TABLE IF NOT EXISTS class_join_requests (\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n                    student_id BIGINT NOT NULL,\n                    class_id BIGINT NOT NULL,\n                    status ENUM('pending', 'approved', 'denied') DEFAULT 'pending',\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n                    FOREIGN KEY (student_id) REFERENCES users(id),\n                    FOREIGN KEY (class_id) REFERENCES classes(id),\n                    UNIQUE KEY unique_request (student_id, class_id)\n                )\n            `);\n      await connection.commit();\n    } catch (error) {\n      await connection.rollback();\n      throw error;\n    } finally {\n      connection.release();\n    }\n  }\n\n  // User-related methods\n  async login(email, password) {\n    try {\n      const response = await fetch(`${API_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Login failed');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  }\n  async createUser(userData) {\n    try {\n      const response = await fetch(`${API_URL}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Registration failed');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Registration error:', error);\n      throw error;\n    }\n  }\n  async getUserByEmail(email) {\n    try {\n      const response = await fetch(`${API_URL}/users/${email}`);\n      if (!response.ok) {\n        return null;\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error fetching user:', error);\n      return null;\n    }\n  }\n  async updateUserApproval(userId, approved) {\n    await this.pool.query('UPDATE users SET approved = ? WHERE id = ?', [approved, userId]);\n  }\n\n  // School-related methods\n  async createSchool(schoolData) {\n    const connection = await this.pool.getConnection();\n    try {\n      // First check if school exists\n      const [existing] = await connection.query('SELECT id FROM schools WHERE id = ?', [schoolData.id]);\n      if (existing.length > 0) {\n        // Update existing school\n        await connection.query('UPDATE schools SET name = ? WHERE id = ?', [schoolData.name, schoolData.id]);\n        return schoolData.id;\n      } else {\n        // Insert new school\n        const [result] = await connection.query('INSERT INTO schools (id, name) VALUES (?, ?)', [schoolData.id, schoolData.name]);\n        return result.insertId;\n      }\n    } finally {\n      connection.release();\n    }\n  }\n  async getSchoolByName(name) {\n    const [rows] = await this.pool.query('SELECT * FROM schools WHERE name = ?', [name]);\n    return rows[0];\n  }\n  async getSchoolById(id) {\n    const [rows] = await this.pool.query('SELECT * FROM schools WHERE id = ?', [id]);\n    return rows[0];\n  }\n\n  // Class-related methods\n  async createClass(classData) {\n    const connection = await this.pool.getConnection();\n    try {\n      const [result] = await connection.query('INSERT INTO classes (code, name, teacher_id, school_id) VALUES (?, ?, ?, ?)', [classData.code, classData.name, classData.teacher_id, classData.school_id]);\n      return result.insertId;\n    } finally {\n      connection.release();\n    }\n  }\n  async getClassByCode(code, schoolId) {\n    const [rows] = await this.pool.query('SELECT * FROM classes WHERE code = ? AND school_id = ?', [code, schoolId]);\n    return rows[0];\n  }\n\n  // Enrollment-related methods\n  async enrollStudentInClass(studentId, classId) {\n    const connection = await this.pool.getConnection();\n    try {\n      const [result] = await connection.query('INSERT INTO student_class_enrollments (student_id, class_id) VALUES (?, ?)', [studentId, classId]);\n      return result.insertId;\n    } finally {\n      connection.release();\n    }\n  }\n  async getStudentClasses(studentId) {\n    const [rows] = await this.pool.query(`\n            SELECT c.* FROM classes c\n            JOIN student_class_enrollments e ON c.id = e.class_id\n            WHERE e.student_id = ?\n        `, [studentId]);\n    return rows;\n  }\n\n  // Join request methods\n  async createJoinRequest(studentId, classId) {\n    const connection = await this.pool.getConnection();\n    try {\n      const [result] = await connection.query('INSERT INTO class_join_requests (student_id, class_id) VALUES (?, ?)', [studentId, classId]);\n      return result.insertId;\n    } finally {\n      connection.release();\n    }\n  }\n  async updateJoinRequestStatus(requestId, status) {\n    await this.pool.query('UPDATE class_join_requests SET status = ? WHERE id = ?', [status, requestId]);\n  }\n}\nconst database = new Database();\nexport default database;","map":{"version":3,"names":["mysql","dotenv","config","API_URL","process","env","REACT_APP_API_URL","Database","constructor","console","log","host","DB_HOST","user","DB_USER","password","DB_PASSWORD","database","DB_NAME","pool","createPool","waitForConnections","connectionLimit","queueLimit","initialize","connection","createConnection","query","end","createTables","error","getConnection","beginTransaction","commit","rollback","release","login","email","response","fetch","method","headers","body","JSON","stringify","ok","json","Error","createUser","userData","getUserByEmail","updateUserApproval","userId","approved","createSchool","schoolData","existing","id","length","name","result","insertId","getSchoolByName","rows","getSchoolById","createClass","classData","code","teacher_id","school_id","getClassByCode","schoolId","enrollStudentInClass","studentId","classId","getStudentClasses","createJoinRequest","updateJoinRequestStatus","requestId","status"],"sources":["D:/dadas/he true randomizer/theta/src/services/Database.js"],"sourcesContent":["import mysql from 'mysql2/promise';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nclass Database {\r\n    constructor() {\r\n        // Add debugging\r\n        console.log('Database Configuration:', {\r\n            host: process.env.DB_HOST,\r\n            user: process.env.DB_USER,\r\n            password: process.env.DB_PASSWORD ? '****' : 'not set',\r\n            database: process.env.DB_NAME\r\n        });\r\n\r\n        this.pool = mysql.createPool({\r\n            host: process.env.DB_HOST || 'localhost',\r\n            user: process.env.DB_USER || 'root',\r\n            password: process.env.DB_PASSWORD || '',\r\n            database: process.env.DB_NAME || 'theta_db',\r\n            waitForConnections: true,\r\n            connectionLimit: 10,\r\n            queueLimit: 0\r\n        });\r\n    }\r\n\r\n    async initialize() {\r\n        try {\r\n            // Create database if it doesn't exist\r\n            const connection = await mysql.createConnection({\r\n                host: process.env.DB_HOST || 'localhost',\r\n                user: process.env.DB_USER || 'root',\r\n                password: process.env.DB_PASSWORD || ''\r\n            });\r\n\r\n            await connection.query(`CREATE DATABASE IF NOT EXISTS ${process.env.DB_NAME || 'theta_db'}`);\r\n            await connection.end();\r\n\r\n            // Create tables\r\n            await this.createTables();\r\n            console.log('Database initialized successfully');\r\n        } catch (error) {\r\n            console.error('Error initializing database:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async createTables() {\r\n        const connection = await this.pool.getConnection();\r\n        try {\r\n            await connection.beginTransaction();\r\n\r\n            // Create schools table\r\n            await connection.query(`\r\n                CREATE TABLE IF NOT EXISTS schools (\r\n                    id BIGINT PRIMARY KEY,\r\n                    name VARCHAR(255) NOT NULL UNIQUE,\r\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n                )\r\n            `);\r\n\r\n            // Create users table\r\n            await connection.query(`\r\n                CREATE TABLE IF NOT EXISTS users (\r\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n                    email VARCHAR(255) NOT NULL UNIQUE,\r\n                    name VARCHAR(255) NOT NULL,\r\n                    password VARCHAR(255) NOT NULL,\r\n                    role ENUM('teacher', 'student') NOT NULL,\r\n                    school_id BIGINT,\r\n                    approved BOOLEAN DEFAULT FALSE,\r\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (school_id) REFERENCES schools(id)\r\n                )\r\n            `);\r\n\r\n            // Create classes table\r\n            await connection.query(`\r\n                CREATE TABLE IF NOT EXISTS classes (\r\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n                    code VARCHAR(50) NOT NULL,\r\n                    name VARCHAR(255) NOT NULL,\r\n                    teacher_id BIGINT NOT NULL,\r\n                    school_id BIGINT NOT NULL,\r\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (teacher_id) REFERENCES users(id),\r\n                    FOREIGN KEY (school_id) REFERENCES schools(id),\r\n                    UNIQUE KEY unique_class_code (code, school_id)\r\n                )\r\n            `);\r\n\r\n            // Create student_class_enrollments table\r\n            await connection.query(`\r\n                CREATE TABLE IF NOT EXISTS student_class_enrollments (\r\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n                    student_id BIGINT NOT NULL,\r\n                    class_id BIGINT NOT NULL,\r\n                    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (student_id) REFERENCES users(id),\r\n                    FOREIGN KEY (class_id) REFERENCES classes(id),\r\n                    UNIQUE KEY unique_enrollment (student_id, class_id)\r\n                )\r\n            `);\r\n\r\n            // Create class_join_requests table\r\n            await connection.query(`\r\n                CREATE TABLE IF NOT EXISTS class_join_requests (\r\n                    id BIGINT AUTO_INCREMENT PRIMARY KEY,\r\n                    student_id BIGINT NOT NULL,\r\n                    class_id BIGINT NOT NULL,\r\n                    status ENUM('pending', 'approved', 'denied') DEFAULT 'pending',\r\n                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (student_id) REFERENCES users(id),\r\n                    FOREIGN KEY (class_id) REFERENCES classes(id),\r\n                    UNIQUE KEY unique_request (student_id, class_id)\r\n                )\r\n            `);\r\n\r\n            await connection.commit();\r\n        } catch (error) {\r\n            await connection.rollback();\r\n            throw error;\r\n        } finally {\r\n            connection.release();\r\n        }\r\n    }\r\n\r\n    // User-related methods\r\n    async login(email, password) {\r\n        try {\r\n            const response = await fetch(`${API_URL}/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ email, password }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const error = await response.json();\r\n                throw new Error(error.error || 'Login failed');\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Login error:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async createUser(userData) {\r\n        try {\r\n            const response = await fetch(`${API_URL}/register`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(userData),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const error = await response.json();\r\n                throw new Error(error.error || 'Registration failed');\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Registration error:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async getUserByEmail(email) {\r\n        try {\r\n            const response = await fetch(`${API_URL}/users/${email}`);\r\n            if (!response.ok) {\r\n                return null;\r\n            }\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error fetching user:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    async updateUserApproval(userId, approved) {\r\n        await this.pool.query(\r\n            'UPDATE users SET approved = ? WHERE id = ?',\r\n            [approved, userId]\r\n        );\r\n    }\r\n\r\n    // School-related methods\r\n    async createSchool(schoolData) {\r\n        const connection = await this.pool.getConnection();\r\n        try {\r\n            // First check if school exists\r\n            const [existing] = await connection.query(\r\n                'SELECT id FROM schools WHERE id = ?',\r\n                [schoolData.id]\r\n            );\r\n\r\n            if (existing.length > 0) {\r\n                // Update existing school\r\n                await connection.query(\r\n                    'UPDATE schools SET name = ? WHERE id = ?',\r\n                    [schoolData.name, schoolData.id]\r\n                );\r\n                return schoolData.id;\r\n            } else {\r\n                // Insert new school\r\n                const [result] = await connection.query(\r\n                    'INSERT INTO schools (id, name) VALUES (?, ?)',\r\n                    [schoolData.id, schoolData.name]\r\n                );\r\n                return result.insertId;\r\n            }\r\n        } finally {\r\n            connection.release();\r\n        }\r\n    }\r\n\r\n    async getSchoolByName(name) {\r\n        const [rows] = await this.pool.query(\r\n            'SELECT * FROM schools WHERE name = ?',\r\n            [name]\r\n        );\r\n        return rows[0];\r\n    }\r\n\r\n    async getSchoolById(id) {\r\n        const [rows] = await this.pool.query(\r\n            'SELECT * FROM schools WHERE id = ?',\r\n            [id]\r\n        );\r\n        return rows[0];\r\n    }\r\n\r\n    // Class-related methods\r\n    async createClass(classData) {\r\n        const connection = await this.pool.getConnection();\r\n        try {\r\n            const [result] = await connection.query(\r\n                'INSERT INTO classes (code, name, teacher_id, school_id) VALUES (?, ?, ?, ?)',\r\n                [classData.code, classData.name, classData.teacher_id, classData.school_id]\r\n            );\r\n            return result.insertId;\r\n        } finally {\r\n            connection.release();\r\n        }\r\n    }\r\n\r\n    async getClassByCode(code, schoolId) {\r\n        const [rows] = await this.pool.query(\r\n            'SELECT * FROM classes WHERE code = ? AND school_id = ?',\r\n            [code, schoolId]\r\n        );\r\n        return rows[0];\r\n    }\r\n\r\n    // Enrollment-related methods\r\n    async enrollStudentInClass(studentId, classId) {\r\n        const connection = await this.pool.getConnection();\r\n        try {\r\n            const [result] = await connection.query(\r\n                'INSERT INTO student_class_enrollments (student_id, class_id) VALUES (?, ?)',\r\n                [studentId, classId]\r\n            );\r\n            return result.insertId;\r\n        } finally {\r\n            connection.release();\r\n        }\r\n    }\r\n\r\n    async getStudentClasses(studentId) {\r\n        const [rows] = await this.pool.query(`\r\n            SELECT c.* FROM classes c\r\n            JOIN student_class_enrollments e ON c.id = e.class_id\r\n            WHERE e.student_id = ?\r\n        `, [studentId]);\r\n        return rows;\r\n    }\r\n\r\n    // Join request methods\r\n    async createJoinRequest(studentId, classId) {\r\n        const connection = await this.pool.getConnection();\r\n        try {\r\n            const [result] = await connection.query(\r\n                'INSERT INTO class_join_requests (student_id, class_id) VALUES (?, ?)',\r\n                [studentId, classId]\r\n            );\r\n            return result.insertId;\r\n        } finally {\r\n            connection.release();\r\n        }\r\n    }\r\n\r\n    async updateJoinRequestStatus(requestId, status) {\r\n        await this.pool.query(\r\n            'UPDATE class_join_requests SET status = ? WHERE id = ?',\r\n            [status, requestId]\r\n        );\r\n    }\r\n}\r\n\r\nconst database = new Database();\r\nexport default database; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}