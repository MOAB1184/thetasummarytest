{"ast":null,"code":"var _jsxFileName = \"D:\\\\dadas\\\\he true randomizer\\\\theta\\\\src\\\\components\\\\AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackButton from './BackButton';\nimport wasabiStorage from '../services/WasabiStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  var _approvedTeachers$sel;\n  const [activeTab, setActiveTab] = useState('schools');\n  const [schools, setSchools] = useState([]);\n  const [teachers, setTeachers] = useState([]);\n  const [approvedTeachers, setApprovedTeachers] = useState({}); // Map of school -> teachers\n  const [selectedSchool, setSelectedSchool] = useState(null);\n  const [newSchoolName, setNewSchoolName] = useState('');\n  const [error, setError] = useState('');\n  const [showCreateSchool, setShowCreateSchool] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const [selectedClass, setSelectedClass] = useState(null);\n  const [teacherClasses, setTeacherClasses] = useState([]);\n  const [classStudents, setClassStudents] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    loadData();\n  }, []);\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      // Load schools and teachers in parallel\n      const [schoolsData, teachersData] = await Promise.all([wasabiStorage.getData('schools.json') || [], wasabiStorage.listObjects('teacher-approval/')]);\n      setSchools(schoolsData);\n\n      // Process pending teachers\n      const pendingTeachers = await Promise.all(teachersData.filter(teacher => teacher.Key.endsWith('.json')).map(async teacher => {\n        const email = teacher.Key.replace('teacher-approval/', '').replace('.json', '');\n        const teacherData = await wasabiStorage.getData(`teacher-approval/${email}.json`);\n        return {\n          name: teacherData.name,\n          email: email,\n          school: teacherData.school\n        };\n      }));\n      setTeachers(pendingTeachers);\n\n      // Load approved teachers for each school in parallel\n      const approvedTeachersMap = {};\n      const processedEmails = new Set(); // Track processed emails to avoid duplicates\n\n      const schoolPromises = schoolsData.map(async school => {\n        const teachersList = await wasabiStorage.listObjects(`${school.name}/teachers/`);\n        const schoolTeachers = await Promise.all(teachersList.filter(teacher => teacher.Key.endsWith('info.json')).map(async teacher => {\n          const email = teacher.Key.split('/')[2];\n\n          // Skip if we've already processed this email\n          if (processedEmails.has(email)) {\n            return null;\n          }\n          processedEmails.add(email);\n          const teacherData = await wasabiStorage.getData(`${school.name}/teachers/${email}/info.json`);\n          if (teacherData) {\n            return {\n              ...teacherData,\n              email,\n              school: school.name\n            };\n          }\n          return null;\n        }));\n        approvedTeachersMap[school.name] = schoolTeachers.filter(t => t !== null);\n      });\n      await Promise.all(schoolPromises);\n      setApprovedTeachers(approvedTeachersMap);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading data:', error);\n      setError('Failed to load data');\n      setLoading(false);\n    }\n  };\n  const handleCreateSchool = async () => {\n    if (!newSchoolName.trim()) {\n      setError('Please enter a school name');\n      return;\n    }\n    try {\n      const newSchool = {\n        id: Date.now(),\n        name: newSchoolName.trim(),\n        createdAt: new Date().toISOString()\n      };\n\n      // Create school folder structure\n      const schoolFolderKey = `${newSchoolName.trim()}/`;\n      const teachersFolderKey = `${newSchoolName.trim()}/teachers/`;\n      const studentsFolderKey = `${newSchoolName.trim()}/students/`;\n\n      // Create the folders in parallel\n      await Promise.all([wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: schoolFolderKey,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise(), wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: teachersFolderKey,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise(), wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: studentsFolderKey,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise()]);\n\n      // Save school info and update schools list in parallel\n      await Promise.all([wasabiStorage.saveData(`${newSchoolName.trim()}/info.json`, newSchool), wasabiStorage.saveData('schools.json', [...schools, newSchool])]);\n      setSchools([...schools, newSchool]);\n      setNewSchoolName('');\n      setApprovedTeachers({\n        ...approvedTeachers,\n        [newSchool.name]: []\n      });\n      alert('School created successfully!');\n    } catch (error) {\n      console.error('Error creating school:', error);\n      setError('Failed to create school');\n    }\n  };\n  const handleApproveTeacher = async email => {\n    try {\n      const teacherData = await wasabiStorage.getData(`teacher-approval/${email}.json`);\n      if (!teacherData) {\n        setError('Teacher data not found in Wasabi pending list.');\n        return;\n      }\n      const schoolName = teacherData.school;\n\n      // Simulate backend API call to approve teacher in MySQL\n      // In a real backend:\n      // 1. Connect to MySQL\n      // 2. UPDATE users SET approved = true, school = ? WHERE email = ?\n      // 3. If successful, proceed with Wasabi operations.\n      console.log(`Simulating backend: Approving teacher ${email} in MySQL for school ${schoolName}.`);\n      // const backendResponse = await fetch('/api/admin/approve-teacher', { method: 'POST', body: JSON.stringify({ email, schoolName }), headers: {'Content-Type': 'application/json'} });\n      // if (!backendResponse.ok) throw new Error('Backend approval failed');\n\n      // Remove from pending list UI immediately\n      setTeachers(prev => prev.filter(t => t.email !== email));\n\n      // Create teacher folder structure in Wasabi (idempotent)\n      await wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: `${schoolName}/teachers/${email}/`,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise();\n\n      // Save teacher manifest info.json to Wasabi\n      // This file indicates the teacher is approved and has a structure in this school's Wasabi path.\n      const approvedTeacherData = {\n        name: teacherData.name,\n        // Name from pending data\n        email: email,\n        school: schoolName,\n        role: 'teacher',\n        // Assuming role is teacher\n        approved: true,\n        approvedAt: new Date().toISOString()\n      };\n      await wasabiStorage.saveData(`${schoolName}/teachers/${email}/info.json`, approvedTeacherData);\n      console.log(`Created Wasabi manifest: ${schoolName}/teachers/${email}/info.json`);\n\n      // Delete from Wasabi pending approval\n      await wasabiStorage.deleteData(`teacher-approval/${email}.json`);\n      console.log(`Deleted from Wasabi pending: teacher-approval/${email}.json`);\n\n      // Update local approvedTeachers state\n      setApprovedTeachers(prev => {\n        const schoolTeachers = prev[schoolName] || [];\n        // Avoid duplicates if already present (e.g., due to manual refresh)\n        if (!schoolTeachers.some(t => t.email === email)) {\n          return {\n            ...prev,\n            [schoolName]: [...schoolTeachers, approvedTeacherData]\n          };\n        }\n        return prev;\n      });\n      setError('Teacher approved successfully. MySQL updated (simulated) and Wasabi manifest created.', 'success');\n      // No need to call loadData() if we update state directly and correctly.\n    } catch (error) {\n      console.error('Error approving teacher:', error);\n      setError('Failed to approve teacher: ' + error.message);\n      // Optionally, reload data to ensure consistency if complex state updates fail\n      // loadData(); \n    }\n  };\n  const handleDenyTeacher = async email => {\n    try {\n      // Simulate backend API call to deny/delete teacher from MySQL\n      // In a real backend:\n      // 1. Connect to MySQL\n      // 2. DELETE FROM users WHERE email = ? AND approved = false (or mark as denied)\n      // 3. If successful, proceed with Wasabi operations.\n      console.log(`Simulating backend: Denying/deleting teacher ${email} from MySQL.`);\n      // const backendResponse = await fetch(`/api/admin/pending-teacher/${email}`, { method: 'DELETE' });\n      // if (!backendResponse.ok) throw new Error('Backend denial failed');\n\n      // Remove from pending list UI immediately\n      setTeachers(prev => prev.filter(t => t.email !== email));\n\n      // Delete from Wasabi pending approval\n      await wasabiStorage.deleteData(`teacher-approval/${email}.json`);\n      console.log(`Deleted from Wasabi pending: teacher-approval/${email}.json`);\n      setError('Teacher denied. MySQL updated (simulated) and pending Wasabi record deleted.', 'success');\n    } catch (error) {\n      console.error('Error denying teacher:', error);\n      setError('Failed to deny teacher: ' + error.message);\n      // Optionally, reload data to ensure consistency\n      // loadData();\n    }\n  };\n  const removeSchool = async schoolId => {\n    try {\n      const school = schools.find(s => s.id === schoolId);\n      if (!school) {\n        setError('School not found');\n        return;\n      }\n\n      // Add confirmation dialog\n      const confirmed = window.confirm(`Are you sure you want to remove ${school.name}? This will also remove all associated teachers and classes.`);\n      if (!confirmed) return;\n      const updatedSchools = schools.filter(school => school.id !== schoolId);\n      await wasabiStorage.saveData('schools.json', updatedSchools);\n      const newApprovedTeachers = {\n        ...approvedTeachers\n      };\n      delete newApprovedTeachers[schools.find(s => s.id === schoolId).name];\n      setApprovedTeachers(newApprovedTeachers);\n      setError('School removed successfully', 'success');\n    } catch (error) {\n      console.error('Error removing school:', error);\n      setError('Failed to remove school');\n    }\n  };\n  const handleDeleteTeacher = async (schoolId, teacherEmail) => {\n    try {\n      var _approvedTeachers$sch;\n      const school = schools.find(s => s.id === schoolId);\n      if (!school) {\n        setError('School not found');\n        return;\n      }\n      const teacher = (_approvedTeachers$sch = approvedTeachers[school.name]) === null || _approvedTeachers$sch === void 0 ? void 0 : _approvedTeachers$sch.find(t => t.email === teacherEmail);\n      if (!teacher) {\n        setError('Teacher not found');\n        return;\n      }\n\n      // Add confirmation dialog\n      const confirmed = window.confirm(`Are you sure you want to remove ${teacher.name} (${teacher.email}) from ${school.name}? This will also remove all their classes.`);\n      if (!confirmed) return;\n\n      // Remove teacher's data\n      await wasabiStorage.deleteData(`${school.name}/teachers/${teacherEmail}/info.json`);\n\n      // Update state\n      setApprovedTeachers(prev => ({\n        ...prev,\n        [school.name]: prev[school.name].filter(t => t.email !== teacherEmail)\n      }));\n      setError('Teacher removed successfully', 'success');\n    } catch (error) {\n      console.error('Error removing teacher:', error);\n      setError('Failed to remove teacher');\n    }\n  };\n  const loadTeacherClasses = async (schoolName, teacherEmail) => {\n    try {\n      const classes = await wasabiStorage.listObjects(`${schoolName}/teachers/${teacherEmail}/classes/`);\n      const classesData = await Promise.all(classes.filter(c => c.Key.endsWith('/info.json')).map(async c => {\n        const classCode = c.Key.split('/')[4]; // Get class code from path\n        const classData = await wasabiStorage.getData(`${schoolName}/teachers/${teacherEmail}/classes/${classCode}/info.json`);\n        return {\n          ...classData,\n          classCode\n        };\n      }));\n      setTeacherClasses(classesData);\n    } catch (error) {\n      console.error('Error loading teacher classes:', error);\n      setError('Failed to load classes');\n    }\n  };\n  const loadClassStudents = async (schoolName, classCode) => {\n    try {\n      console.log(`Loading students for class ${classCode} in school ${schoolName}`);\n\n      // First, try to get students from the class's students directory\n      const students = await wasabiStorage.listObjects(`${schoolName}/teachers/${selectedTeacher.email}/classes/${classCode}/students/`);\n      if (students.length > 0) {\n        console.log(`Found ${students.length} students in class directory`);\n        const studentsData = await Promise.all(students.filter(s => s.Key.endsWith('/info.json')).map(async s => {\n          const studentEmail = s.Key.split('/')[6]; // Get student email from path\n          const studentData = await wasabiStorage.getData(`${schoolName}/students/${studentEmail}/info.json`);\n          return {\n            ...studentData,\n            email: studentEmail\n          };\n        }));\n        setClassStudents(studentsData);\n        return;\n      }\n\n      // If no students found in class directory, try to find them from student records\n      console.log('No students found in class directory, checking student records');\n      const allStudents = await wasabiStorage.listObjects(`${schoolName}/students/`);\n      const enrolledStudents = [];\n      for (const student of allStudents) {\n        if (!student.Key.endsWith('/info.json')) continue;\n        const studentEmail = student.Key.split('/')[2];\n        const studentData = await wasabiStorage.getData(student.Key);\n        if (studentData && studentData.classes && Array.isArray(studentData.classes)) {\n          // Check if this student is enrolled in the selected class\n          const isEnrolled = studentData.classes.some(c => c.code === classCode && c.teacherEmail === selectedTeacher.email);\n          if (isEnrolled) {\n            enrolledStudents.push({\n              ...studentData,\n              email: studentEmail\n            });\n          }\n        }\n      }\n      console.log(`Found ${enrolledStudents.length} enrolled students from student records`);\n      setClassStudents(enrolledStudents);\n    } catch (error) {\n      console.error('Error loading students:', error);\n      setError('Failed to load students');\n    }\n  };\n  const handleTeacherClick = async teacher => {\n    if ((selectedTeacher === null || selectedTeacher === void 0 ? void 0 : selectedTeacher.email) === teacher.email) {\n      setSelectedTeacher(null);\n      setTeacherClasses([]);\n      setSelectedClass(null);\n      setClassStudents([]);\n    } else {\n      setSelectedTeacher(teacher);\n      setSelectedClass(null);\n      setClassStudents([]);\n      await loadTeacherClasses(teacher.school, teacher.email);\n    }\n  };\n  const handleClassClick = async classData => {\n    if ((selectedClass === null || selectedClass === void 0 ? void 0 : selectedClass.classCode) === classData.classCode) {\n      setSelectedClass(null);\n      setClassStudents([]);\n    } else {\n      setSelectedClass(classData);\n      await loadClassStudents(selectedTeacher.school, classData.classCode);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading admin dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .admin-dashboard {\n          padding: 20px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        .admin-content {\n          display: flex;\n          flex-direction: column;\n          gap: 30px;\n        }\n\n        .schools-section {\n          margin-bottom: 30px;\n        }\n\n        .schools-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n          gap: 20px;\n          margin-top: 20px;\n        }\n\n        .school-card {\n          background-color: #2d2d2d;\n          border-radius: 8px;\n          padding: 20px;\n          cursor: pointer;\n          transition: transform 0.2s, background-color 0.2s;\n          position: relative;\n        }\n\n        .school-card:hover {\n          transform: translateY(-2px);\n          background-color: #353535;\n        }\n\n        .school-card h4 {\n          margin: 0 0 10px 0;\n          color: #fff;\n          font-size: 18px;\n          padding-right: 30px;\n        }\n\n        .teacher-count {\n          color: #888;\n          margin: 0;\n          font-size: 14px;\n        }\n\n        .teachers-section {\n          background-color: #2d2d2d;\n          border-radius: 8px;\n          padding: 20px;\n          width: 100%;\n        }\n\n        .teachers-list {\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n          margin-top: 15px;\n          width: 100%;\n        }\n\n        .teacher-item {\n          background-color: #1a1a1a;\n          border-radius: 4px;\n          padding: 15px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          min-width: 400px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .teacher-item:hover {\n          background-color: #2d2d2d;\n        }\n\n        .teacher-item.selected {\n          background-color: #2d2d2d;\n          border-bottom-left-radius: 0;\n          border-bottom-right-radius: 0;\n        }\n\n        .teacher-info {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n          flex: 1;\n          margin-right: 20px;\n        }\n\n        .teacher-name {\n          font-weight: bold;\n          color: #fff;\n          font-size: 16px;\n        }\n\n        .teacher-email {\n          color: #888;\n          font-size: 14px;\n        }\n\n        .delete-button {\n          background-color: #dc3545;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          padding: 8px 16px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: background-color 0.2s;\n          min-width: 80px;\n          white-space: nowrap;\n        }\n\n        .delete-button:hover {\n          background-color: #c82333;\n        }\n\n        .teacher-approvals-section {\n          background-color: #2d2d2d;\n          border-radius: 8px;\n          padding: 20px;\n        }\n\n        .teacher-approvals-list {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\n          gap: 20px;\n          margin-top: 15px;\n        }\n\n        .teacher-approval-item {\n          background-color: #1a1a1a;\n          border-radius: 8px;\n          padding: 20px;\n          display: flex;\n          flex-direction: column;\n          gap: 15px;\n        }\n\n        .approval-actions {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n        }\n\n        .approve-button, .deny-button {\n          color: white;\n          border: none;\n          border-radius: 4px;\n          padding: 12px 0;\n          cursor: pointer;\n          font-size: 16px;\n          font-weight: 500;\n          transition: background-color 0.2s;\n          width: 100%;\n          height: 45px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: 0;\n        }\n\n        .approve-button {\n          background-color: #28a745;\n        }\n\n        .approve-button:hover {\n          background-color: #218838;\n        }\n\n        .deny-button {\n          background-color: #dc3545;\n        }\n\n        .deny-button:hover {\n          background-color: #c82333;\n        }\n\n        h2 {\n          color: #fff;\n          margin-bottom: 30px;\n        }\n\n        h3 {\n          color: #fff;\n          margin: 0 0 15px 0;\n        }\n\n        .error-message {\n          background-color: #dc3545;\n          color: white;\n          padding: 10px;\n          border-radius: 4px;\n          margin-bottom: 20px;\n        }\n\n        .teacher-classes {\n          background-color: #2d2d2d;\n          padding: 15px;\n          margin-top: -1px;\n          border-bottom-left-radius: 4px;\n          border-bottom-right-radius: 4px;\n        }\n\n        .classes-list {\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n          margin-top: 10px;\n        }\n\n        .class-item {\n          background-color: #1a1a1a;\n          border-radius: 4px;\n          padding: 12px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .class-item:hover {\n          background-color: #353535;\n        }\n\n        .class-item.selected {\n          background-color: #353535;\n        }\n\n        .class-info {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .class-name {\n          font-weight: bold;\n          color: #fff;\n        }\n\n        .class-code {\n          color: #888;\n          font-size: 14px;\n        }\n\n        .class-students {\n          margin-top: 15px;\n          padding-top: 15px;\n          border-top: 1px solid #444;\n        }\n\n        .students-list {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          margin-top: 10px;\n        }\n\n        .student-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 8px;\n          background-color: #1a1a1a;\n          border-radius: 4px;\n        }\n\n        .student-name {\n          color: #fff;\n        }\n\n        .student-email {\n          color: #888;\n          font-size: 14px;\n        }\n\n        .no-classes, .no-students {\n          color: #888;\n          font-style: italic;\n          text-align: center;\n          padding: 10px;\n        }\n\n        h4 {\n          color: #fff;\n          margin: 0 0 10px 0;\n          font-size: 16px;\n        }\n\n        h5 {\n          color: #fff;\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BackButton, {\n      destination: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 709,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"schools-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Schools\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 9\n        }, this), showCreateSchool ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-school-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newSchoolName,\n            onChange: e => setNewSchoolName(e.target.value),\n            placeholder: \"Enter school name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCreateSchool,\n              children: \"Create School\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowCreateSchool(false),\n              className: \"secondary-button\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCreateSchool(true),\n          className: \"create-school-button\",\n          children: \"Create New School\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"schools-grid\",\n          children: schools.map(school => {\n            var _approvedTeachers$sch2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"school-card\",\n              onClick: () => setSelectedSchool(school),\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: school.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"teacher-count\",\n                children: [((_approvedTeachers$sch2 = approvedTeachers[school.name]) === null || _approvedTeachers$sch2 === void 0 ? void 0 : _approvedTeachers$sch2.length) || 0, \" Teachers\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 17\n              }, this)]\n            }, school.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 7\n      }, this), selectedSchool && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"teachers-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [selectedSchool.name, \" Teachers\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"teachers-list\",\n          children: (_approvedTeachers$sel = approvedTeachers[selectedSchool.name]) === null || _approvedTeachers$sel === void 0 ? void 0 : _approvedTeachers$sel.map(teacher => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"teacher-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"teacher-info\",\n                onClick: () => handleTeacherClick(teacher),\n                style: {\n                  cursor: 'pointer'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"teacher-name\",\n                  children: teacher.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"teacher-email\",\n                  children: teacher.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 761,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"teacher-actions\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"delete-button\",\n                  onClick: e => {\n                    e.stopPropagation();\n                    handleDeleteTeacher(selectedSchool.id, teacher.email);\n                  },\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 764,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 19\n            }, this), (selectedTeacher === null || selectedTeacher === void 0 ? void 0 : selectedTeacher.email) === teacher.email && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"teacher-details\",\n              style: {\n                backgroundColor: '#1a1a1a',\n                padding: '15px',\n                marginTop: '1px',\n                borderBottomLeftRadius: '4px',\n                borderBottomRightRadius: '4px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"classes-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  style: {\n                    color: '#fff',\n                    marginBottom: '10px'\n                  },\n                  children: \"Classes:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 784,\n                  columnNumber: 25\n                }, this), teacherClasses.length > 0 ? teacherClasses.map(classData => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `class-item ${(selectedClass === null || selectedClass === void 0 ? void 0 : selectedClass.classCode) === classData.classCode ? 'selected' : ''}`,\n                  onClick: () => handleClassClick(classData),\n                  style: {\n                    backgroundColor: (selectedClass === null || selectedClass === void 0 ? void 0 : selectedClass.classCode) === classData.classCode ? '#353535' : '#2d2d2d',\n                    padding: '10px',\n                    marginBottom: '8px',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    position: 'relative'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"class-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        color: '#fff',\n                        fontWeight: 'bold'\n                      },\n                      children: classData.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 801,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        color: '#888',\n                        fontSize: '14px'\n                      },\n                      children: [\"Code: \", classData.classCode]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 802,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 800,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"delete-button\",\n                    style: {\n                      position: 'absolute',\n                      top: 10,\n                      right: 10,\n                      zIndex: 2\n                    },\n                    onClick: async e => {\n                      e.stopPropagation();\n                      if (window.confirm(`Are you sure you want to delete class '${classData.name}'? This will remove all summaries, recordings, and students for this class.`)) {\n                        try {\n                          const schoolName = selectedTeacher.school;\n                          const teacherEmail = selectedTeacher.email;\n                          const classCode = classData.classCode;\n                          // Delete class info\n                          await wasabiStorage.deleteData(wasabiStorage.getClassPath(schoolName, teacherEmail, classCode));\n                          // Delete all summaries\n                          const summaries = await wasabiStorage.listObjects(wasabiStorage.getSummariesPath(schoolName, teacherEmail, classCode));\n                          for (const s of summaries) {\n                            await wasabiStorage.deleteData(s.Key);\n                          }\n                          // Delete all recordings\n                          const recordings = await wasabiStorage.listObjects(wasabiStorage.getRecordingsPath(schoolName, teacherEmail, classCode));\n                          for (const r of recordings) {\n                            await wasabiStorage.deleteData(r.Key);\n                          }\n                          // Delete all join-requests\n                          const joinRequests = await wasabiStorage.listObjects(`${schoolName}/teachers/${teacherEmail}/classes/${classCode}/join-requests/`);\n                          for (const j of joinRequests) {\n                            await wasabiStorage.deleteData(j.Key);\n                          }\n                          // Optionally: delete students subfolder if exists\n                          const students = await wasabiStorage.listObjects(`${schoolName}/teachers/${teacherEmail}/classes/${classCode}/students/`);\n                          for (const st of students) {\n                            await wasabiStorage.deleteData(st.Key);\n                          }\n                          // Refresh class list\n                          await loadTeacherClasses(schoolName, teacherEmail);\n                          setSelectedClass(null);\n                          setClassStudents([]);\n                          setError('Class deleted successfully', 'success');\n                        } catch (err) {\n                          setError('Failed to delete class: ' + err.message);\n                        }\n                      }\n                    },\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 804,\n                    columnNumber: 31\n                  }, this), (selectedClass === null || selectedClass === void 0 ? void 0 : selectedClass.classCode) === classData.classCode && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"class-students\",\n                    style: {\n                      marginTop: '15px',\n                      borderTop: '1px solid #444',\n                      paddingTop: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      style: {\n                        color: '#fff',\n                        marginBottom: '10px'\n                      },\n                      children: \"Enrolled Students:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 849,\n                      columnNumber: 35\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"students-list\",\n                      children: [classStudents.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"student-item\",\n                        style: {\n                          backgroundColor: '#1a1a1a',\n                          padding: '10px',\n                          borderRadius: '4px',\n                          marginBottom: '8px'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          style: {\n                            color: '#fff'\n                          },\n                          children: student.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 858,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          style: {\n                            color: '#888',\n                            fontSize: '14px'\n                          },\n                          children: student.email\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 859,\n                          columnNumber: 41\n                        }, this)]\n                      }, student.email, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 852,\n                        columnNumber: 39\n                      }, this)), classStudents.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                        style: {\n                          color: '#888',\n                          fontStyle: 'italic'\n                        },\n                        children: \"No students enrolled in this class\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 863,\n                        columnNumber: 39\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 850,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 848,\n                    columnNumber: 33\n                  }, this)]\n                }, classData.classCode, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 787,\n                  columnNumber: 29\n                }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#888',\n                    fontStyle: 'italic',\n                    padding: '10px'\n                  },\n                  children: \"No classes created\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 871,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 783,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 21\n            }, this)]\n          }, teacher.email, true, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 9\n      }, this), teachers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"teacher-approvals-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Teacher Approvals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"teacher-approvals-list\",\n          children: teachers.map(teacher => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"teacher-approval-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"teacher-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"teacher-name\",\n                children: teacher.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 889,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"teacher-email\",\n                children: teacher.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"teacher-school\",\n                style: {\n                  color: '#888',\n                  fontSize: '14px'\n                },\n                children: [\"School: \", teacher.school]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 888,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"approval-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"approve-button\",\n                onClick: () => handleApproveTeacher(teacher.email),\n                children: \"Approve\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"deny-button\",\n                onClick: () => handleDenyTeacher(teacher.email),\n                children: \"Deny\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 19\n            }, this)]\n          }, teacher.email, true, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 885,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 883,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 712,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 407,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminDashboard, \"SzgQWzG+MYH2Ey09MJYXKzryAbU=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","BackButton","wasabiStorage","jsxDEV","_jsxDEV","AdminDashboard","_s","_approvedTeachers$sel","activeTab","setActiveTab","schools","setSchools","teachers","setTeachers","approvedTeachers","setApprovedTeachers","selectedSchool","setSelectedSchool","newSchoolName","setNewSchoolName","error","setError","showCreateSchool","setShowCreateSchool","loading","setLoading","selectedTeacher","setSelectedTeacher","selectedClass","setSelectedClass","teacherClasses","setTeacherClasses","classStudents","setClassStudents","navigate","loadData","schoolsData","teachersData","Promise","all","getData","listObjects","pendingTeachers","filter","teacher","Key","endsWith","map","email","replace","teacherData","name","school","approvedTeachersMap","processedEmails","Set","schoolPromises","teachersList","schoolTeachers","split","has","add","t","console","handleCreateSchool","trim","newSchool","id","Date","now","createdAt","toISOString","schoolFolderKey","teachersFolderKey","studentsFolderKey","s3","putObject","Bucket","bucket","Body","ContentType","promise","saveData","alert","handleApproveTeacher","schoolName","log","prev","approvedTeacherData","role","approved","approvedAt","deleteData","some","message","handleDenyTeacher","removeSchool","schoolId","find","s","confirmed","window","confirm","updatedSchools","newApprovedTeachers","handleDeleteTeacher","teacherEmail","_approvedTeachers$sch","loadTeacherClasses","classes","classesData","c","classCode","classData","loadClassStudents","students","length","studentsData","studentEmail","studentData","allStudents","enrolledStudents","student","Array","isArray","isEnrolled","code","push","handleTeacherClick","handleClassClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","jsx","destination","type","value","onChange","e","target","placeholder","onClick","_approvedTeachers$sch2","style","cursor","stopPropagation","backgroundColor","padding","marginTop","borderBottomLeftRadius","borderBottomRightRadius","color","marginBottom","borderRadius","position","fontWeight","fontSize","top","right","zIndex","getClassPath","summaries","getSummariesPath","recordings","getRecordingsPath","r","joinRequests","j","st","err","borderTop","paddingTop","fontStyle","_c","$RefreshReg$"],"sources":["D:/dadas/he true randomizer/theta/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackButton from './BackButton';\nimport wasabiStorage from '../services/WasabiStorage';\n\nfunction AdminDashboard() {\n  const [activeTab, setActiveTab] = useState('schools');\n  const [schools, setSchools] = useState([]);\n  const [teachers, setTeachers] = useState([]);\n  const [approvedTeachers, setApprovedTeachers] = useState({});  // Map of school -> teachers\n  const [selectedSchool, setSelectedSchool] = useState(null);\n  const [newSchoolName, setNewSchoolName] = useState('');\n  const [error, setError] = useState('');\n  const [showCreateSchool, setShowCreateSchool] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const [selectedClass, setSelectedClass] = useState(null);\n  const [teacherClasses, setTeacherClasses] = useState([]);\n  const [classStudents, setClassStudents] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      // Load schools and teachers in parallel\n      const [schoolsData, teachersData] = await Promise.all([\n        wasabiStorage.getData('schools.json') || [],\n        wasabiStorage.listObjects('teacher-approval/')\n      ]);\n\n      setSchools(schoolsData);\n\n      // Process pending teachers\n      const pendingTeachers = await Promise.all(\n        teachersData\n          .filter(teacher => teacher.Key.endsWith('.json'))\n          .map(async (teacher) => {\n            const email = teacher.Key.replace('teacher-approval/', '').replace('.json', '');\n            const teacherData = await wasabiStorage.getData(`teacher-approval/${email}.json`);\n            return {\n              name: teacherData.name,\n              email: email,\n              school: teacherData.school\n            };\n          })\n      );\n      setTeachers(pendingTeachers);\n\n      // Load approved teachers for each school in parallel\n      const approvedTeachersMap = {};\n      const processedEmails = new Set(); // Track processed emails to avoid duplicates\n\n      const schoolPromises = schoolsData.map(async (school) => {\n        const teachersList = await wasabiStorage.listObjects(`${school.name}/teachers/`);\n        const schoolTeachers = await Promise.all(\n          teachersList\n            .filter(teacher => teacher.Key.endsWith('info.json'))\n            .map(async (teacher) => {\n              const email = teacher.Key.split('/')[2];\n              \n              // Skip if we've already processed this email\n              if (processedEmails.has(email)) {\n                return null;\n              }\n              processedEmails.add(email);\n              \n              const teacherData = await wasabiStorage.getData(`${school.name}/teachers/${email}/info.json`);\n              if (teacherData) {\n                return {\n                  ...teacherData,\n                  email,\n                  school: school.name\n                };\n              }\n              return null;\n            })\n        );\n        approvedTeachersMap[school.name] = schoolTeachers.filter(t => t !== null);\n      });\n\n      await Promise.all(schoolPromises);\n      setApprovedTeachers(approvedTeachersMap);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading data:', error);\n      setError('Failed to load data');\n      setLoading(false);\n    }\n  };\n\n  const handleCreateSchool = async () => {\n    if (!newSchoolName.trim()) {\n      setError('Please enter a school name');\n      return;\n    }\n\n    try {\n      const newSchool = {\n        id: Date.now(),\n        name: newSchoolName.trim(),\n        createdAt: new Date().toISOString()\n      };\n\n      // Create school folder structure\n      const schoolFolderKey = `${newSchoolName.trim()}/`;\n      const teachersFolderKey = `${newSchoolName.trim()}/teachers/`;\n      const studentsFolderKey = `${newSchoolName.trim()}/students/`;\n\n      // Create the folders in parallel\n      await Promise.all([\n        wasabiStorage.s3.putObject({\n          Bucket: wasabiStorage.bucket,\n          Key: schoolFolderKey,\n          Body: '',\n          ContentType: 'application/x-directory'\n        }).promise(),\n        wasabiStorage.s3.putObject({\n          Bucket: wasabiStorage.bucket,\n          Key: teachersFolderKey,\n          Body: '',\n          ContentType: 'application/x-directory'\n        }).promise(),\n        wasabiStorage.s3.putObject({\n          Bucket: wasabiStorage.bucket,\n          Key: studentsFolderKey,\n          Body: '',\n          ContentType: 'application/x-directory'\n        }).promise()\n      ]);\n\n      // Save school info and update schools list in parallel\n      await Promise.all([\n        wasabiStorage.saveData(`${newSchoolName.trim()}/info.json`, newSchool),\n        wasabiStorage.saveData('schools.json', [...schools, newSchool])\n      ]);\n      \n      setSchools([...schools, newSchool]);\n      setNewSchoolName('');\n      setApprovedTeachers({ ...approvedTeachers, [newSchool.name]: [] });\n      alert('School created successfully!');\n    } catch (error) {\n      console.error('Error creating school:', error);\n      setError('Failed to create school');\n    }\n  };\n\n  const handleApproveTeacher = async (email) => {\n    try {\n      const teacherData = await wasabiStorage.getData(`teacher-approval/${email}.json`);\n      if (!teacherData) {\n        setError('Teacher data not found in Wasabi pending list.');\n        return;\n      }\n\n      const schoolName = teacherData.school;\n\n      // Simulate backend API call to approve teacher in MySQL\n      // In a real backend:\n      // 1. Connect to MySQL\n      // 2. UPDATE users SET approved = true, school = ? WHERE email = ?\n      // 3. If successful, proceed with Wasabi operations.\n      console.log(`Simulating backend: Approving teacher ${email} in MySQL for school ${schoolName}.`);\n      // const backendResponse = await fetch('/api/admin/approve-teacher', { method: 'POST', body: JSON.stringify({ email, schoolName }), headers: {'Content-Type': 'application/json'} });\n      // if (!backendResponse.ok) throw new Error('Backend approval failed');\n\n      // Remove from pending list UI immediately\n      setTeachers(prev => prev.filter(t => t.email !== email));\n\n      // Create teacher folder structure in Wasabi (idempotent)\n      await wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: `${schoolName}/teachers/${email}/`,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise();\n\n      // Save teacher manifest info.json to Wasabi\n      // This file indicates the teacher is approved and has a structure in this school's Wasabi path.\n      const approvedTeacherData = {\n        name: teacherData.name, // Name from pending data\n        email: email,\n        school: schoolName,\n        role: 'teacher', // Assuming role is teacher\n        approved: true,\n        approvedAt: new Date().toISOString()\n      };\n      await wasabiStorage.saveData(`${schoolName}/teachers/${email}/info.json`, approvedTeacherData);\n      console.log(`Created Wasabi manifest: ${schoolName}/teachers/${email}/info.json`);\n\n      // Delete from Wasabi pending approval\n      await wasabiStorage.deleteData(`teacher-approval/${email}.json`);\n      console.log(`Deleted from Wasabi pending: teacher-approval/${email}.json`);\n\n      // Update local approvedTeachers state\n      setApprovedTeachers(prev => {\n        const schoolTeachers = prev[schoolName] || [];\n        // Avoid duplicates if already present (e.g., due to manual refresh)\n        if (!schoolTeachers.some(t => t.email === email)) {\n          return {\n            ...prev,\n            [schoolName]: [...schoolTeachers, approvedTeacherData]\n          };\n        }\n        return prev;\n      });\n      \n      setError('Teacher approved successfully. MySQL updated (simulated) and Wasabi manifest created.', 'success');\n      // No need to call loadData() if we update state directly and correctly.\n    } catch (error) {\n      console.error('Error approving teacher:', error);\n      setError('Failed to approve teacher: ' + error.message);\n      // Optionally, reload data to ensure consistency if complex state updates fail\n      // loadData(); \n    }\n  };\n\n  const handleDenyTeacher = async (email) => {\n    try {\n      // Simulate backend API call to deny/delete teacher from MySQL\n      // In a real backend:\n      // 1. Connect to MySQL\n      // 2. DELETE FROM users WHERE email = ? AND approved = false (or mark as denied)\n      // 3. If successful, proceed with Wasabi operations.\n      console.log(`Simulating backend: Denying/deleting teacher ${email} from MySQL.`);\n      // const backendResponse = await fetch(`/api/admin/pending-teacher/${email}`, { method: 'DELETE' });\n      // if (!backendResponse.ok) throw new Error('Backend denial failed');\n\n      // Remove from pending list UI immediately\n      setTeachers(prev => prev.filter(t => t.email !== email));\n      \n      // Delete from Wasabi pending approval\n      await wasabiStorage.deleteData(`teacher-approval/${email}.json`);\n      console.log(`Deleted from Wasabi pending: teacher-approval/${email}.json`);\n      \n      setError('Teacher denied. MySQL updated (simulated) and pending Wasabi record deleted.', 'success');\n    } catch (error) {\n      console.error('Error denying teacher:', error);\n      setError('Failed to deny teacher: ' + error.message);\n      // Optionally, reload data to ensure consistency\n      // loadData();\n    }\n  };\n\n  const removeSchool = async (schoolId) => {\n    try {\n      const school = schools.find(s => s.id === schoolId);\n      if (!school) {\n        setError('School not found');\n        return;\n      }\n\n      // Add confirmation dialog\n      const confirmed = window.confirm(`Are you sure you want to remove ${school.name}? This will also remove all associated teachers and classes.`);\n      if (!confirmed) return;\n\n      const updatedSchools = schools.filter(school => school.id !== schoolId);\n      await wasabiStorage.saveData('schools.json', updatedSchools);\n    \n      const newApprovedTeachers = { ...approvedTeachers };\n      delete newApprovedTeachers[schools.find(s => s.id === schoolId).name];\n      setApprovedTeachers(newApprovedTeachers);\n      setError('School removed successfully', 'success');\n    } catch (error) {\n      console.error('Error removing school:', error);\n      setError('Failed to remove school');\n    }\n  };\n\n  const handleDeleteTeacher = async (schoolId, teacherEmail) => {\n    try {\n      const school = schools.find(s => s.id === schoolId);\n      if (!school) {\n        setError('School not found');\n        return;\n      }\n\n      const teacher = approvedTeachers[school.name]?.find(t => t.email === teacherEmail);\n      if (!teacher) {\n        setError('Teacher not found');\n        return;\n      }\n\n      // Add confirmation dialog\n      const confirmed = window.confirm(`Are you sure you want to remove ${teacher.name} (${teacher.email}) from ${school.name}? This will also remove all their classes.`);\n      if (!confirmed) return;\n\n      // Remove teacher's data\n      await wasabiStorage.deleteData(`${school.name}/teachers/${teacherEmail}/info.json`);\n      \n      // Update state\n      setApprovedTeachers(prev => ({\n        ...prev,\n        [school.name]: prev[school.name].filter(t => t.email !== teacherEmail)\n      }));\n      setError('Teacher removed successfully', 'success');\n    } catch (error) {\n      console.error('Error removing teacher:', error);\n      setError('Failed to remove teacher');\n    }\n  };\n\n  const loadTeacherClasses = async (schoolName, teacherEmail) => {\n    try {\n      const classes = await wasabiStorage.listObjects(`${schoolName}/teachers/${teacherEmail}/classes/`);\n      const classesData = await Promise.all(\n        classes\n          .filter(c => c.Key.endsWith('/info.json'))\n          .map(async (c) => {\n            const classCode = c.Key.split('/')[4]; // Get class code from path\n            const classData = await wasabiStorage.getData(`${schoolName}/teachers/${teacherEmail}/classes/${classCode}/info.json`);\n            return { ...classData, classCode };\n          })\n      );\n      setTeacherClasses(classesData);\n    } catch (error) {\n      console.error('Error loading teacher classes:', error);\n      setError('Failed to load classes');\n    }\n  };\n\n  const loadClassStudents = async (schoolName, classCode) => {\n    try {\n      console.log(`Loading students for class ${classCode} in school ${schoolName}`);\n      \n      // First, try to get students from the class's students directory\n      const students = await wasabiStorage.listObjects(`${schoolName}/teachers/${selectedTeacher.email}/classes/${classCode}/students/`);\n      \n      if (students.length > 0) {\n        console.log(`Found ${students.length} students in class directory`);\n        const studentsData = await Promise.all(\n          students\n            .filter(s => s.Key.endsWith('/info.json'))\n            .map(async (s) => {\n              const studentEmail = s.Key.split('/')[6]; // Get student email from path\n              const studentData = await wasabiStorage.getData(`${schoolName}/students/${studentEmail}/info.json`);\n              return { ...studentData, email: studentEmail };\n            })\n        );\n        setClassStudents(studentsData);\n        return;\n      }\n      \n      // If no students found in class directory, try to find them from student records\n      console.log('No students found in class directory, checking student records');\n      const allStudents = await wasabiStorage.listObjects(`${schoolName}/students/`);\n      const enrolledStudents = [];\n      \n      for (const student of allStudents) {\n        if (!student.Key.endsWith('/info.json')) continue;\n        \n        const studentEmail = student.Key.split('/')[2];\n        const studentData = await wasabiStorage.getData(student.Key);\n        \n        if (studentData && studentData.classes && Array.isArray(studentData.classes)) {\n          // Check if this student is enrolled in the selected class\n          const isEnrolled = studentData.classes.some(c => \n            c.code === classCode && c.teacherEmail === selectedTeacher.email\n          );\n          \n          if (isEnrolled) {\n            enrolledStudents.push({ ...studentData, email: studentEmail });\n          }\n        }\n      }\n      \n      console.log(`Found ${enrolledStudents.length} enrolled students from student records`);\n      setClassStudents(enrolledStudents);\n    } catch (error) {\n      console.error('Error loading students:', error);\n      setError('Failed to load students');\n    }\n  };\n\n  const handleTeacherClick = async (teacher) => {\n    if (selectedTeacher?.email === teacher.email) {\n      setSelectedTeacher(null);\n      setTeacherClasses([]);\n      setSelectedClass(null);\n      setClassStudents([]);\n    } else {\n      setSelectedTeacher(teacher);\n      setSelectedClass(null);\n      setClassStudents([]);\n      await loadTeacherClasses(teacher.school, teacher.email);\n    }\n  };\n\n  const handleClassClick = async (classData) => {\n    if (selectedClass?.classCode === classData.classCode) {\n      setSelectedClass(null);\n      setClassStudents([]);\n    } else {\n      setSelectedClass(classData);\n      await loadClassStudents(selectedTeacher.school, classData.classCode);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading admin dashboard...</div>;\n  }\n\n  return (\n    <div className=\"admin-dashboard\">\n      <style jsx>{`\n        .admin-dashboard {\n          padding: 20px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        .admin-content {\n          display: flex;\n          flex-direction: column;\n          gap: 30px;\n        }\n\n        .schools-section {\n          margin-bottom: 30px;\n        }\n\n        .schools-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n          gap: 20px;\n          margin-top: 20px;\n        }\n\n        .school-card {\n          background-color: #2d2d2d;\n          border-radius: 8px;\n          padding: 20px;\n          cursor: pointer;\n          transition: transform 0.2s, background-color 0.2s;\n          position: relative;\n        }\n\n        .school-card:hover {\n          transform: translateY(-2px);\n          background-color: #353535;\n        }\n\n        .school-card h4 {\n          margin: 0 0 10px 0;\n          color: #fff;\n          font-size: 18px;\n          padding-right: 30px;\n        }\n\n        .teacher-count {\n          color: #888;\n          margin: 0;\n          font-size: 14px;\n        }\n\n        .teachers-section {\n          background-color: #2d2d2d;\n          border-radius: 8px;\n          padding: 20px;\n          width: 100%;\n        }\n\n        .teachers-list {\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n          margin-top: 15px;\n          width: 100%;\n        }\n\n        .teacher-item {\n          background-color: #1a1a1a;\n          border-radius: 4px;\n          padding: 15px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          min-width: 400px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .teacher-item:hover {\n          background-color: #2d2d2d;\n        }\n\n        .teacher-item.selected {\n          background-color: #2d2d2d;\n          border-bottom-left-radius: 0;\n          border-bottom-right-radius: 0;\n        }\n\n        .teacher-info {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n          flex: 1;\n          margin-right: 20px;\n        }\n\n        .teacher-name {\n          font-weight: bold;\n          color: #fff;\n          font-size: 16px;\n        }\n\n        .teacher-email {\n          color: #888;\n          font-size: 14px;\n        }\n\n        .delete-button {\n          background-color: #dc3545;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          padding: 8px 16px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: background-color 0.2s;\n          min-width: 80px;\n          white-space: nowrap;\n        }\n\n        .delete-button:hover {\n          background-color: #c82333;\n        }\n\n        .teacher-approvals-section {\n          background-color: #2d2d2d;\n          border-radius: 8px;\n          padding: 20px;\n        }\n\n        .teacher-approvals-list {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\n          gap: 20px;\n          margin-top: 15px;\n        }\n\n        .teacher-approval-item {\n          background-color: #1a1a1a;\n          border-radius: 8px;\n          padding: 20px;\n          display: flex;\n          flex-direction: column;\n          gap: 15px;\n        }\n\n        .approval-actions {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n        }\n\n        .approve-button, .deny-button {\n          color: white;\n          border: none;\n          border-radius: 4px;\n          padding: 12px 0;\n          cursor: pointer;\n          font-size: 16px;\n          font-weight: 500;\n          transition: background-color 0.2s;\n          width: 100%;\n          height: 45px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: 0;\n        }\n\n        .approve-button {\n          background-color: #28a745;\n        }\n\n        .approve-button:hover {\n          background-color: #218838;\n        }\n\n        .deny-button {\n          background-color: #dc3545;\n        }\n\n        .deny-button:hover {\n          background-color: #c82333;\n        }\n\n        h2 {\n          color: #fff;\n          margin-bottom: 30px;\n        }\n\n        h3 {\n          color: #fff;\n          margin: 0 0 15px 0;\n        }\n\n        .error-message {\n          background-color: #dc3545;\n          color: white;\n          padding: 10px;\n          border-radius: 4px;\n          margin-bottom: 20px;\n        }\n\n        .teacher-classes {\n          background-color: #2d2d2d;\n          padding: 15px;\n          margin-top: -1px;\n          border-bottom-left-radius: 4px;\n          border-bottom-right-radius: 4px;\n        }\n\n        .classes-list {\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n          margin-top: 10px;\n        }\n\n        .class-item {\n          background-color: #1a1a1a;\n          border-radius: 4px;\n          padding: 12px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n\n        .class-item:hover {\n          background-color: #353535;\n        }\n\n        .class-item.selected {\n          background-color: #353535;\n        }\n\n        .class-info {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .class-name {\n          font-weight: bold;\n          color: #fff;\n        }\n\n        .class-code {\n          color: #888;\n          font-size: 14px;\n        }\n\n        .class-students {\n          margin-top: 15px;\n          padding-top: 15px;\n          border-top: 1px solid #444;\n        }\n\n        .students-list {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          margin-top: 10px;\n        }\n\n        .student-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 8px;\n          background-color: #1a1a1a;\n          border-radius: 4px;\n        }\n\n        .student-name {\n          color: #fff;\n        }\n\n        .student-email {\n          color: #888;\n          font-size: 14px;\n        }\n\n        .no-classes, .no-students {\n          color: #888;\n          font-style: italic;\n          text-align: center;\n          padding: 10px;\n        }\n\n        h4 {\n          color: #fff;\n          margin: 0 0 10px 0;\n          font-size: 16px;\n        }\n\n        h5 {\n          color: #fff;\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n      `}</style>\n      <BackButton destination=\"/\" />\n      <h2>Admin Dashboard</h2>\n      {error && <div className=\"error-message\">{error}</div>}\n\n      <div className=\"admin-content\">\n      <div className=\"schools-section\">\n        <h3>Schools</h3>\n        {showCreateSchool ? (\n          <div className=\"create-school-form\">\n            <input\n              type=\"text\"\n              value={newSchoolName}\n              onChange={(e) => setNewSchoolName(e.target.value)}\n              placeholder=\"Enter school name\"\n            />\n            <div className=\"form-actions\">\n              <button onClick={handleCreateSchool}>Create School</button>\n              <button onClick={() => setShowCreateSchool(false)} className=\"secondary-button\">\n                Cancel\n              </button>\n            </div>\n          </div>\n        ) : (\n          <button onClick={() => setShowCreateSchool(true)} className=\"create-school-button\">\n            Create New School\n          </button>\n        )}\n        \n          <div className=\"schools-grid\">\n            {schools.map((school) => (\n              <div \n                key={school.id} \n                className=\"school-card\"\n                onClick={() => setSelectedSchool(school)}\n              >\n                <h4>{school.name}</h4>\n                <p className=\"teacher-count\">\n                  {approvedTeachers[school.name]?.length || 0} Teachers\n                </p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n        {selectedSchool && (\n        <div className=\"teachers-section\">\n            <h3>{selectedSchool.name} Teachers</h3>\n          <div className=\"teachers-list\">\n              {approvedTeachers[selectedSchool.name]?.map((teacher) => (\n                <div key={teacher.email}>\n                  <div className=\"teacher-item\">\n                    <div className=\"teacher-info\" onClick={() => handleTeacherClick(teacher)} style={{ cursor: 'pointer' }}>\n                      <span className=\"teacher-name\">{teacher.name}</span>\n                      <span className=\"teacher-email\">{teacher.email}</span>\n                </div>\n                <div className=\"teacher-actions\">\n                      <button \n                        className=\"delete-button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleDeleteTeacher(selectedSchool.id, teacher.email);\n                        }}\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                  {selectedTeacher?.email === teacher.email && (\n                    <div className=\"teacher-details\" style={{ \n                      backgroundColor: '#1a1a1a',\n                      padding: '15px',\n                      marginTop: '1px',\n                      borderBottomLeftRadius: '4px',\n                      borderBottomRightRadius: '4px'\n                    }}>\n                      <div className=\"classes-section\">\n                        <h4 style={{ color: '#fff', marginBottom: '10px' }}>Classes:</h4>\n                        {teacherClasses.length > 0 ? (\n                          teacherClasses.map((classData) => (\n                            <div \n                              key={classData.classCode} \n                              className={`class-item ${selectedClass?.classCode === classData.classCode ? 'selected' : ''}`}\n                              onClick={() => handleClassClick(classData)}\n                              style={{ \n                                backgroundColor: selectedClass?.classCode === classData.classCode ? '#353535' : '#2d2d2d',\n                                padding: '10px',\n                                marginBottom: '8px',\n                                borderRadius: '4px',\n                                cursor: 'pointer',\n                                position: 'relative'\n                              }}\n                            >\n                              <div className=\"class-info\">\n                                <span style={{ color: '#fff', fontWeight: 'bold' }}>{classData.name}</span>\n                                <span style={{ color: '#888', fontSize: '14px' }}>Code: {classData.classCode}</span>\n                              </div>\n                              <button\n                                className=\"delete-button\"\n                                style={{ position: 'absolute', top: 10, right: 10, zIndex: 2 }}\n                                onClick={async (e) => {\n                                  e.stopPropagation();\n                                  if (window.confirm(`Are you sure you want to delete class '${classData.name}'? This will remove all summaries, recordings, and students for this class.`)) {\n                                    try {\n                                      const schoolName = selectedTeacher.school;\n                                      const teacherEmail = selectedTeacher.email;\n                                      const classCode = classData.classCode;\n                                      // Delete class info\n                                      await wasabiStorage.deleteData(wasabiStorage.getClassPath(schoolName, teacherEmail, classCode));\n                                      // Delete all summaries\n                                      const summaries = await wasabiStorage.listObjects(wasabiStorage.getSummariesPath(schoolName, teacherEmail, classCode));\n                                      for (const s of summaries) {\n                                        await wasabiStorage.deleteData(s.Key);\n                                      }\n                                      // Delete all recordings\n                                      const recordings = await wasabiStorage.listObjects(wasabiStorage.getRecordingsPath(schoolName, teacherEmail, classCode));\n                                      for (const r of recordings) {\n                                        await wasabiStorage.deleteData(r.Key);\n                                      }\n                                      // Delete all join-requests\n                                      const joinRequests = await wasabiStorage.listObjects(`${schoolName}/teachers/${teacherEmail}/classes/${classCode}/join-requests/`);\n                                      for (const j of joinRequests) {\n                                        await wasabiStorage.deleteData(j.Key);\n                                      }\n                                      // Optionally: delete students subfolder if exists\n                                      const students = await wasabiStorage.listObjects(`${schoolName}/teachers/${teacherEmail}/classes/${classCode}/students/`);\n                                      for (const st of students) {\n                                        await wasabiStorage.deleteData(st.Key);\n                                      }\n                                      // Refresh class list\n                                      await loadTeacherClasses(schoolName, teacherEmail);\n                                      setSelectedClass(null);\n                                      setClassStudents([]);\n                                      setError('Class deleted successfully', 'success');\n                                    } catch (err) {\n                                      setError('Failed to delete class: ' + err.message);\n                                    }\n                                  }\n                                }}\n                              >Delete</button>\n                              {selectedClass?.classCode === classData.classCode && (\n                                <div className=\"class-students\" style={{ marginTop: '15px', borderTop: '1px solid #444', paddingTop: '15px' }}>\n                                  <h5 style={{ color: '#fff', marginBottom: '10px' }}>Enrolled Students:</h5>\n                                  <div className=\"students-list\">\n                                    {classStudents.map((student) => (\n                                      <div key={student.email} className=\"student-item\" style={{\n                                        backgroundColor: '#1a1a1a',\n                                        padding: '10px',\n                                        borderRadius: '4px',\n                                        marginBottom: '8px'\n                                      }}>\n                                        <span style={{ color: '#fff' }}>{student.name}</span>\n                                        <span style={{ color: '#888', fontSize: '14px' }}>{student.email}</span>\n                                      </div>\n                                    ))}\n                                    {classStudents.length === 0 && (\n                                      <p style={{ color: '#888', fontStyle: 'italic' }}>No students enrolled in this class</p>\n                                    )}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          ))\n                        ) : (\n                          <p style={{ color: '#888', fontStyle: 'italic', padding: '10px' }}>No classes created</p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {teachers.length > 0 && (\n          <div className=\"teacher-approvals-section\">\n            <h3>Teacher Approvals</h3>\n            <div className=\"teacher-approvals-list\">\n              {teachers.map((teacher) => (\n                <div key={teacher.email} className=\"teacher-approval-item\">\n                  <div className=\"teacher-info\">\n                    <span className=\"teacher-name\">{teacher.name}</span>\n                    <span className=\"teacher-email\">{teacher.email}</span>\n                    <span className=\"teacher-school\" style={{ color: '#888', fontSize: '14px' }}>School: {teacher.school}</span>\n                  </div>\n                  <div className=\"approval-actions\">\n                  <button \n                    className=\"approve-button\"\n                    onClick={() => handleApproveTeacher(teacher.email)}\n                  >\n                    Approve\n                  </button>\n                  <button \n                    className=\"deny-button\"\n                    onClick={() => handleDenyTeacher(teacher.email)}\n                  >\n                    Deny\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      </div>\n    </div>\n  );\n}\n\nexport default AdminDashboard; "],"mappings":"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AC;IACzD;EACF,CAAC;EAED,MAAMiF,gBAAgB,GAAG,MAAOhB,SAAS,IAAK;IAC5C,IAAI,CAAArF,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEoF,SAAS,MAAKC,SAAS,CAACD,SAAS,EAAE;MACpDnF,gBAAgB,CAAC,IAAI,CAAC;MACtBI,gBAAgB,CAAC,EAAE,CAAC;IACtB,CAAC,MAAM;MACLJ,gBAAgB,CAACoF,SAAS,CAAC;MAC3B,MAAMC,iBAAiB,CAACxF,eAAe,CAAC0B,MAAM,EAAE6D,SAAS,CAACD,SAAS,CAAC;IACtE;EACF,CAAC;EAED,IAAIxF,OAAO,EAAE;IACX,oBAAOpB,OAAA;MAAK8H,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAC;IAA0B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAClE;EAEA,oBACEnI,OAAA;IAAK8H,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAC9B/H,OAAA;MAAOoI,GAAG;MAAAL,QAAA,EAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACVnI,OAAA,CAACH,UAAU;MAACwI,WAAW,EAAC;IAAG;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9BnI,OAAA;MAAA+H,QAAA,EAAI;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACvBnH,KAAK,iBAAIhB,OAAA;MAAK8H,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAE/G;IAAK;MAAAgH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAEtDnI,OAAA;MAAK8H,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC9B/H,OAAA;QAAK8H,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9B/H,OAAA;UAAA+H,QAAA,EAAI;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACfjH,gBAAgB,gBACflB,OAAA;UAAK8H,SAAS,EAAC,oBAAoB;UAAAC,QAAA,gBACjC/H,OAAA;YACEsI,IAAI,EAAC,MAAM;YACXC,KAAK,EAAEzH,aAAc;YACrB0H,QAAQ,EAAGC,CAAC,IAAK1H,gBAAgB,CAAC0H,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAClDI,WAAW,EAAC;UAAmB;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC,eACFnI,OAAA;YAAK8H,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3B/H,OAAA;cAAQ4I,OAAO,EAAEhF,kBAAmB;cAAAmE,QAAA,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC3DnI,OAAA;cAAQ4I,OAAO,EAAEA,CAAA,KAAMzH,mBAAmB,CAAC,KAAK,CAAE;cAAC2G,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EAAC;YAEhF;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,gBAENnI,OAAA;UAAQ4I,OAAO,EAAEA,CAAA,KAAMzH,mBAAmB,CAAC,IAAI,CAAE;UAAC2G,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAAC;QAEnF;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACT,eAECnI,OAAA;UAAK8H,SAAS,EAAC,cAAc;UAAAC,QAAA,EAC1BzH,OAAO,CAACqC,GAAG,CAAEK,MAAM;YAAA,IAAA6F,sBAAA;YAAA,oBAClB7I,OAAA;cAEE8H,SAAS,EAAC,aAAa;cACvBc,OAAO,EAAEA,CAAA,KAAM/H,iBAAiB,CAACmC,MAAM,CAAE;cAAA+E,QAAA,gBAEzC/H,OAAA;gBAAA+H,QAAA,EAAK/E,MAAM,CAACD;cAAI;gBAAAiF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACtBnI,OAAA;gBAAG8H,SAAS,EAAC,eAAe;gBAAAC,QAAA,GACzB,EAAAc,sBAAA,GAAAnI,gBAAgB,CAACsC,MAAM,CAACD,IAAI,CAAC,cAAA8F,sBAAA,uBAA7BA,sBAAA,CAA+B7B,MAAM,KAAI,CAAC,EAAC,WAC9C;cAAA;gBAAAgB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA,GAPCnF,MAAM,CAACe,EAAE;cAAAiE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAQb,CAAC;UAAA,CACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAEHvH,cAAc,iBACfZ,OAAA;QAAK8H,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC7B/H,OAAA;UAAA+H,QAAA,GAAKnH,cAAc,CAACmC,IAAI,EAAC,WAAS;QAAA;UAAAiF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACzCnI,OAAA;UAAK8H,SAAS,EAAC,eAAe;UAAAC,QAAA,GAAA5H,qBAAA,GACzBO,gBAAgB,CAACE,cAAc,CAACmC,IAAI,CAAC,cAAA5C,qBAAA,uBAArCA,qBAAA,CAAuCwC,GAAG,CAAEH,OAAO,iBAClDxC,OAAA;YAAA+H,QAAA,gBACE/H,OAAA;cAAK8H,SAAS,EAAC,cAAc;cAAAC,QAAA,gBAC3B/H,OAAA;gBAAK8H,SAAS,EAAC,cAAc;gBAACc,OAAO,EAAEA,CAAA,KAAMhB,kBAAkB,CAACpF,OAAO,CAAE;gBAACsG,KAAK,EAAE;kBAAEC,MAAM,EAAE;gBAAU,CAAE;gBAAAhB,QAAA,gBACrG/H,OAAA;kBAAM8H,SAAS,EAAC,cAAc;kBAAAC,QAAA,EAAEvF,OAAO,CAACO;gBAAI;kBAAAiF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACpDnI,OAAA;kBAAM8H,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAEvF,OAAO,CAACI;gBAAK;kBAAAoF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvD,CAAC,eACNnI,OAAA;gBAAK8H,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,eAC1B/H,OAAA;kBACE8H,SAAS,EAAC,eAAe;kBACzBc,OAAO,EAAGH,CAAC,IAAK;oBACdA,CAAC,CAACO,eAAe,CAAC,CAAC;oBACnB3C,mBAAmB,CAACzF,cAAc,CAACmD,EAAE,EAAEvB,OAAO,CAACI,KAAK,CAAC;kBACvD,CAAE;kBAAAmF,QAAA,EACH;gBAED;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,EACL,CAAA7G,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEsB,KAAK,MAAKJ,OAAO,CAACI,KAAK,iBACvC5C,OAAA;cAAK8H,SAAS,EAAC,iBAAiB;cAACgB,KAAK,EAAE;gBACtCG,eAAe,EAAE,SAAS;gBAC1BC,OAAO,EAAE,MAAM;gBACfC,SAAS,EAAE,KAAK;gBAChBC,sBAAsB,EAAE,KAAK;gBAC7BC,uBAAuB,EAAE;cAC3B,CAAE;cAAAtB,QAAA,eACA/H,OAAA;gBAAK8H,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,gBAC9B/H,OAAA;kBAAI8I,KAAK,EAAE;oBAAEQ,KAAK,EAAE,MAAM;oBAAEC,YAAY,EAAE;kBAAO,CAAE;kBAAAxB,QAAA,EAAC;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,EAChEzG,cAAc,CAACsF,MAAM,GAAG,CAAC,GACxBtF,cAAc,CAACiB,GAAG,CAAEkE,SAAS,iBAC3B7G,OAAA;kBAEE8H,SAAS,EAAE,cAAc,CAAAtG,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEoF,SAAS,MAAKC,SAAS,CAACD,SAAS,GAAG,UAAU,GAAG,EAAE,EAAG;kBAC9FgC,OAAO,EAAEA,CAAA,KAAMf,gBAAgB,CAAChB,SAAS,CAAE;kBAC3CiC,KAAK,EAAE;oBACLG,eAAe,EAAE,CAAAzH,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEoF,SAAS,MAAKC,SAAS,CAACD,SAAS,GAAG,SAAS,GAAG,SAAS;oBACzFsC,OAAO,EAAE,MAAM;oBACfK,YAAY,EAAE,KAAK;oBACnBC,YAAY,EAAE,KAAK;oBACnBT,MAAM,EAAE,SAAS;oBACjBU,QAAQ,EAAE;kBACZ,CAAE;kBAAA1B,QAAA,gBAEF/H,OAAA;oBAAK8H,SAAS,EAAC,YAAY;oBAAAC,QAAA,gBACzB/H,OAAA;sBAAM8I,KAAK,EAAE;wBAAEQ,KAAK,EAAE,MAAM;wBAAEI,UAAU,EAAE;sBAAO,CAAE;sBAAA3B,QAAA,EAAElB,SAAS,CAAC9D;oBAAI;sBAAAiF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eAC3EnI,OAAA;sBAAM8I,KAAK,EAAE;wBAAEQ,KAAK,EAAE,MAAM;wBAAEK,QAAQ,EAAE;sBAAO,CAAE;sBAAA5B,QAAA,GAAC,QAAM,EAAClB,SAAS,CAACD,SAAS;oBAAA;sBAAAoB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACjF,CAAC,eACNnI,OAAA;oBACE8H,SAAS,EAAC,eAAe;oBACzBgB,KAAK,EAAE;sBAAEW,QAAQ,EAAE,UAAU;sBAAEG,GAAG,EAAE,EAAE;sBAAEC,KAAK,EAAE,EAAE;sBAAEC,MAAM,EAAE;oBAAE,CAAE;oBAC/DlB,OAAO,EAAE,MAAOH,CAAC,IAAK;sBACpBA,CAAC,CAACO,eAAe,CAAC,CAAC;sBACnB,IAAI/C,MAAM,CAACC,OAAO,CAAC,0CAA0CW,SAAS,CAAC9D,IAAI,6EAA6E,CAAC,EAAE;wBACzJ,IAAI;0BACF,MAAMkC,UAAU,GAAG3D,eAAe,CAAC0B,MAAM;0BACzC,MAAMsD,YAAY,GAAGhF,eAAe,CAACsB,KAAK;0BAC1C,MAAMgE,SAAS,GAAGC,SAAS,CAACD,SAAS;0BACrC;0BACA,MAAM9G,aAAa,CAAC0F,UAAU,CAAC1F,aAAa,CAACiK,YAAY,CAAC9E,UAAU,EAAEqB,YAAY,EAAEM,SAAS,CAAC,CAAC;0BAC/F;0BACA,MAAMoD,SAAS,GAAG,MAAMlK,aAAa,CAACuC,WAAW,CAACvC,aAAa,CAACmK,gBAAgB,CAAChF,UAAU,EAAEqB,YAAY,EAAEM,SAAS,CAAC,CAAC;0BACtH,KAAK,MAAMb,CAAC,IAAIiE,SAAS,EAAE;4BACzB,MAAMlK,aAAa,CAAC0F,UAAU,CAACO,CAAC,CAACtD,GAAG,CAAC;0BACvC;0BACA;0BACA,MAAMyH,UAAU,GAAG,MAAMpK,aAAa,CAACuC,WAAW,CAACvC,aAAa,CAACqK,iBAAiB,CAAClF,UAAU,EAAEqB,YAAY,EAAEM,SAAS,CAAC,CAAC;0BACxH,KAAK,MAAMwD,CAAC,IAAIF,UAAU,EAAE;4BAC1B,MAAMpK,aAAa,CAAC0F,UAAU,CAAC4E,CAAC,CAAC3H,GAAG,CAAC;0BACvC;0BACA;0BACA,MAAM4H,YAAY,GAAG,MAAMvK,aAAa,CAACuC,WAAW,CAAC,GAAG4C,UAAU,aAAaqB,YAAY,YAAYM,SAAS,iBAAiB,CAAC;0BAClI,KAAK,MAAM0D,CAAC,IAAID,YAAY,EAAE;4BAC5B,MAAMvK,aAAa,CAAC0F,UAAU,CAAC8E,CAAC,CAAC7H,GAAG,CAAC;0BACvC;0BACA;0BACA,MAAMsE,QAAQ,GAAG,MAAMjH,aAAa,CAACuC,WAAW,CAAC,GAAG4C,UAAU,aAAaqB,YAAY,YAAYM,SAAS,YAAY,CAAC;0BACzH,KAAK,MAAM2D,EAAE,IAAIxD,QAAQ,EAAE;4BACzB,MAAMjH,aAAa,CAAC0F,UAAU,CAAC+E,EAAE,CAAC9H,GAAG,CAAC;0BACxC;0BACA;0BACA,MAAM+D,kBAAkB,CAACvB,UAAU,EAAEqB,YAAY,CAAC;0BAClD7E,gBAAgB,CAAC,IAAI,CAAC;0BACtBI,gBAAgB,CAAC,EAAE,CAAC;0BACpBZ,QAAQ,CAAC,4BAA4B,EAAE,SAAS,CAAC;wBACnD,CAAC,CAAC,OAAOuJ,GAAG,EAAE;0BACZvJ,QAAQ,CAAC,0BAA0B,GAAGuJ,GAAG,CAAC9E,OAAO,CAAC;wBACpD;sBACF;oBACF,CAAE;oBAAAqC,QAAA,EACH;kBAAM;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EACf,CAAA3G,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAEoF,SAAS,MAAKC,SAAS,CAACD,SAAS,iBAC/C5G,OAAA;oBAAK8H,SAAS,EAAC,gBAAgB;oBAACgB,KAAK,EAAE;sBAAEK,SAAS,EAAE,MAAM;sBAAEsB,SAAS,EAAE,gBAAgB;sBAAEC,UAAU,EAAE;oBAAO,CAAE;oBAAA3C,QAAA,gBAC5G/H,OAAA;sBAAI8I,KAAK,EAAE;wBAAEQ,KAAK,EAAE,MAAM;wBAAEC,YAAY,EAAE;sBAAO,CAAE;sBAAAxB,QAAA,EAAC;oBAAkB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eAC3EnI,OAAA;sBAAK8H,SAAS,EAAC,eAAe;sBAAAC,QAAA,GAC3BnG,aAAa,CAACe,GAAG,CAAE2E,OAAO,iBACzBtH,OAAA;wBAAyB8H,SAAS,EAAC,cAAc;wBAACgB,KAAK,EAAE;0BACvDG,eAAe,EAAE,SAAS;0BAC1BC,OAAO,EAAE,MAAM;0BACfM,YAAY,EAAE,KAAK;0BACnBD,YAAY,EAAE;wBAChB,CAAE;wBAAAxB,QAAA,gBACA/H,OAAA;0BAAM8I,KAAK,EAAE;4BAAEQ,KAAK,EAAE;0BAAO,CAAE;0BAAAvB,QAAA,EAAET,OAAO,CAACvE;wBAAI;0BAAAiF,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAO,CAAC,eACrDnI,OAAA;0BAAM8I,KAAK,EAAE;4BAAEQ,KAAK,EAAE,MAAM;4BAAEK,QAAQ,EAAE;0BAAO,CAAE;0BAAA5B,QAAA,EAAET,OAAO,CAAC1E;wBAAK;0BAAAoF,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAO,CAAC;sBAAA,GAPhEb,OAAO,CAAC1E,KAAK;wBAAAoF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAQlB,CACN,CAAC,EACDvG,aAAa,CAACoF,MAAM,KAAK,CAAC,iBACzBhH,OAAA;wBAAG8I,KAAK,EAAE;0BAAEQ,KAAK,EAAE,MAAM;0BAAEqB,SAAS,EAAE;wBAAS,CAAE;wBAAA5C,QAAA,EAAC;sBAAkC;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAG,CACxF;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CACN;gBAAA,GA/EItB,SAAS,CAACD,SAAS;kBAAAoB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAgFrB,CACN,CAAC,gBAEFnI,OAAA;kBAAG8I,KAAK,EAAE;oBAAEQ,KAAK,EAAE,MAAM;oBAAEqB,SAAS,EAAE,QAAQ;oBAAEzB,OAAO,EAAE;kBAAO,CAAE;kBAAAnB,QAAA,EAAC;gBAAkB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CACzF;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CACN;UAAA,GAtHO3F,OAAO,CAACI,KAAK;YAAAoF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAuHlB,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAEA3H,QAAQ,CAACwG,MAAM,GAAG,CAAC,iBAClBhH,OAAA;QAAK8H,SAAS,EAAC,2BAA2B;QAAAC,QAAA,gBACxC/H,OAAA;UAAA+H,QAAA,EAAI;QAAiB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1BnI,OAAA;UAAK8H,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EACpCvH,QAAQ,CAACmC,GAAG,CAAEH,OAAO,iBACpBxC,OAAA;YAAyB8H,SAAS,EAAC,uBAAuB;YAAAC,QAAA,gBACxD/H,OAAA;cAAK8H,SAAS,EAAC,cAAc;cAAAC,QAAA,gBAC3B/H,OAAA;gBAAM8H,SAAS,EAAC,cAAc;gBAAAC,QAAA,EAAEvF,OAAO,CAACO;cAAI;gBAAAiF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACpDnI,OAAA;gBAAM8H,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAEvF,OAAO,CAACI;cAAK;gBAAAoF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACtDnI,OAAA;gBAAM8H,SAAS,EAAC,gBAAgB;gBAACgB,KAAK,EAAE;kBAAEQ,KAAK,EAAE,MAAM;kBAAEK,QAAQ,EAAE;gBAAO,CAAE;gBAAA5B,QAAA,GAAC,UAAQ,EAACvF,OAAO,CAACQ,MAAM;cAAA;gBAAAgF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzG,CAAC,eACNnI,OAAA;cAAK8H,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBACjC/H,OAAA;gBACE8H,SAAS,EAAC,gBAAgB;gBAC1Bc,OAAO,EAAEA,CAAA,KAAM5D,oBAAoB,CAACxC,OAAO,CAACI,KAAK,CAAE;gBAAAmF,QAAA,EACpD;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTnI,OAAA;gBACE8H,SAAS,EAAC,aAAa;gBACvBc,OAAO,EAAEA,CAAA,KAAMjD,iBAAiB,CAACnD,OAAO,CAACI,KAAK,CAAE;gBAAAmF,QAAA,EACjD;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA,GAnBI3F,OAAO,CAACI,KAAK;YAAAoF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAoBpB,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACjI,EAAA,CA74BQD,cAAc;EAAA,QAcJL,WAAW;AAAA;AAAAgL,EAAA,GAdrB3K,cAAc;AA+4BvB,eAAeA,cAAc;AAAC,IAAA2K,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}