{"ast":null,"code":"var _jsxFileName = \"D:\\\\dadas\\\\he true randomizer\\\\theta\\\\my-app\\\\src\\\\components\\\\TeacherDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackButton from './BackButton';\nimport infuraStorage from '../services/MetaMaskStorage';\nimport wasabiStorage from '../services/WasabiStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TeacherDashboard() {\n  _s();\n  const [classes, setClasses] = useState([]);\n  const [showCreateClass, setShowCreateClass] = useState(false);\n  const [newClassName, setNewClassName] = useState('');\n  const [selectedClass, setSelectedClass] = useState(null);\n  const [pendingStudents, setPendingStudents] = useState([]);\n  const [activeTab, setActiveTab] = useState('classes');\n  const [recordings, setRecordings] = useState([]);\n  const [teacherData, setTeacherData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const mediaRecorderRef = useRef(null);\n  const timeIntervalRef = useRef(null);\n  const chunksRef = useRef([]);\n  const navigate = useNavigate();\n\n  // Memoize the connectAndLoadTeacherData function to prevent infinite loop\n  const connectAndLoadTeacherData = React.useCallback(async teacherEmail => {\n    try {\n      setIsConnecting(true);\n      setError('');\n\n      // Connect to Infura\n      const connectResult = await infuraStorage.connect();\n      if (!connectResult.success) {\n        setError(`Infura connection error: ${connectResult.error}`);\n        setLoading(false);\n        return;\n      }\n      await loadTeacherData(teacherEmail);\n      await loadRecordings(teacherEmail);\n      setLoading(false); // Set loading to false after all data is loaded\n    } catch (error) {\n      setError(`Error connecting to Infura: ${error.message}`);\n      console.error('Connection error:', error);\n      setLoading(false);\n    } finally {\n      setIsConnecting(false);\n    }\n  }, []);\n  const loadRecordings = async teacherEmail => {\n    try {\n      if (!selectedClass) {\n        return;\n      }\n      const recordingsData = await wasabiStorage.listObjects(wasabiStorage.getRecordingsPath(teacherEmail, selectedClass.code));\n      const loadedRecordings = [];\n      for (const recording of recordingsData) {\n        if (recording.Key.endsWith('.json')) {\n          const recordingData = await wasabiStorage.getData(recording.Key);\n          if (recordingData) {\n            loadedRecordings.push(recordingData);\n          }\n        }\n      }\n      setRecordings(loadedRecordings);\n    } catch (error) {\n      console.error('Error loading recordings:', error);\n      setError('Failed to load recordings');\n    }\n  };\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n      chunksRef.current = [];\n      mediaRecorder.ondataavailable = e => {\n        if (e.data.size > 0) {\n          chunksRef.current.push(e.data);\n        }\n      };\n      mediaRecorder.onstop = async () => {\n        const blob = new Blob(chunksRef.current, {\n          type: 'audio/webm'\n        });\n        const url = URL.createObjectURL(blob);\n        const timestamp = new Date().toISOString();\n        const newRecording = {\n          id: Date.now(),\n          url,\n          timestamp,\n          duration: recordingTime,\n          localPath: `recording_${timestamp}.webm`\n        };\n\n        // Update recordings state\n        const updatedRecordings = [...recordings, newRecording];\n        setRecordings(updatedRecordings);\n\n        // Update selected class recordings\n        if (selectedClass) {\n          const updatedClass = {\n            ...selectedClass,\n            recordings: [...selectedClass.recordings, newRecording]\n          };\n          setSelectedClass(updatedClass);\n\n          // Update classes state\n          const updatedClasses = classes.map(c => c.id === selectedClass.id ? updatedClass : c);\n          setClasses(updatedClasses);\n\n          // Save to Infura\n          const teacherEmail = sessionStorage.getItem('userEmail');\n          await infuraStorage.saveData(`classes_${teacherEmail}`, updatedClasses);\n        }\n\n        // Save recording data\n        await infuraStorage.saveData(`recordings_${sessionStorage.getItem('userEmail')}`, updatedRecordings);\n\n        // Save to local storage\n        const reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = () => {\n          localStorage.setItem(`recording_${timestamp}`, reader.result);\n        };\n        stream.getTracks().forEach(track => track.stop());\n      };\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingTime(0);\n      timeIntervalRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      setError('Failed to start recording. Please check your microphone permissions.');\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      clearInterval(timeIntervalRef.current);\n      setIsRecording(false);\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  useEffect(() => {\n    document.body.classList.add('dashboard-page');\n    const teacherEmail = sessionStorage.getItem('userEmail');\n    connectAndLoadTeacherData(teacherEmail);\n    return () => {\n      document.body.classList.remove('dashboard-page');\n      if (timeIntervalRef.current) {\n        clearInterval(timeIntervalRef.current);\n      }\n      if (mediaRecorderRef.current && isRecording) {\n        mediaRecorderRef.current.stop();\n      }\n    };\n  }, [connectAndLoadTeacherData, isRecording]);\n  const loadTeacherData = async teacherEmail => {\n    try {\n      // Get teacher data\n      const teacherData = await wasabiStorage.getData(wasabiStorage.getTeacherPath(teacherEmail));\n      if (!teacherData) {\n        setError('Teacher data not found');\n        return;\n      }\n      setTeacherData(teacherData);\n\n      // List all classes\n      const classesData = await wasabiStorage.listObjects(wasabiStorage.getTeacherClassesPath(teacherEmail));\n      const loadedClasses = [];\n      for (const classObj of classesData) {\n        if (classObj.Key.endsWith('info.json')) {\n          const classData = await wasabiStorage.getData(classObj.Key);\n          if (classData) {\n            // Load join requests for this class\n            const classCode = classData.code;\n            const joinRequestsPath = `Skyline/teachers/${teacherEmail}/classes/${classCode}/join-requests/`;\n            console.log('Checking join requests at:', joinRequestsPath);\n            const joinRequests = await wasabiStorage.listObjects(joinRequestsPath);\n            console.log('Found join requests:', joinRequests);\n            const pendingStudents = [];\n            for (const request of joinRequests) {\n              if (request.Key.endsWith('.json')) {\n                const requestData = await wasabiStorage.getData(request.Key);\n                if (requestData && requestData.status === 'pending') {\n                  pendingStudents.push(requestData);\n                }\n              }\n            }\n            classData.pendingStudents = pendingStudents;\n            loadedClasses.push(classData);\n          }\n        }\n      }\n      console.log('Loaded classes with pending students:', loadedClasses);\n      setClasses(loadedClasses);\n    } catch (error) {\n      console.error('Error loading teacher data:', error);\n      setError('Failed to load teacher data');\n    }\n  };\n  const createClass = async () => {\n    if (!newClassName.trim()) {\n      setError('Please enter a class name');\n      return;\n    }\n    try {\n      const teacherEmail = sessionStorage.getItem('userEmail');\n\n      // Generate a unique 6-character class code\n      const generateClassCode = () => {\n        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n        let code = '';\n        for (let i = 0; i < 6; i++) {\n          code += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return code;\n      };\n      const classCode = generateClassCode();\n\n      // Create class folder structure\n      const classPath = wasabiStorage.getClassPath(teacherEmail, classCode);\n      const recordingsPath = wasabiStorage.getRecordingsPath(teacherEmail, classCode);\n      const summariesPath = wasabiStorage.getSummariesPath(teacherEmail, classCode);\n\n      // Create the folders\n      await Promise.all([wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: recordingsPath,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise(), wasabiStorage.s3.putObject({\n        Bucket: wasabiStorage.bucket,\n        Key: summariesPath,\n        Body: '',\n        ContentType: 'application/x-directory'\n      }).promise()]);\n\n      // Create class data\n      const classData = {\n        name: newClassName.trim(),\n        code: classCode,\n        teacherEmail,\n        students: [],\n        pendingStudents: [],\n        createdAt: new Date().toISOString()\n      };\n\n      // Save class info\n      await wasabiStorage.saveData(classPath, classData);\n\n      // Update UI\n      setClasses([...classes, classData]);\n      setNewClassName('');\n      setShowCreateClass(false);\n\n      // Show success message with class code\n      alert(`Class created successfully! Class code: ${classCode}`);\n    } catch (error) {\n      console.error('Error creating class:', error);\n      setError('Failed to create class');\n    }\n  };\n  const approveStudent = async studentEmail => {\n    try {\n      if (!selectedClass) {\n        throw new Error('No class selected');\n      }\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      const requestPath = wasabiStorage.getClassJoinRequestPath(teacherEmail, selectedClass.code, studentEmail);\n      const joinRequest = await wasabiStorage.getData(requestPath);\n      if (!joinRequest) {\n        throw new Error('Join request not found');\n      }\n\n      // Update join request status\n      const updatedRequest = {\n        ...joinRequest,\n        status: 'approved'\n      };\n      await wasabiStorage.saveData(requestPath, updatedRequest);\n\n      // Update student's classes in their data\n      const studentData = await wasabiStorage.getData(wasabiStorage.getStudentPath(studentEmail));\n      if (studentData) {\n        const updatedStudentData = {\n          ...studentData,\n          classes: [...(studentData.classes || []), {\n            code: selectedClass.code,\n            teacherEmail: teacherEmail,\n            joinedAt: new Date().toISOString()\n          }]\n        };\n        await wasabiStorage.saveData(wasabiStorage.getStudentPath(studentEmail), updatedStudentData);\n      }\n\n      // Reload teacher data to refresh the UI\n      await loadTeacherData(teacherEmail);\n    } catch (error) {\n      console.error('Error approving student:', error);\n      setError('Failed to approve student');\n    }\n  };\n  const denyStudent = async studentEmail => {\n    try {\n      if (!selectedClass) {\n        throw new Error('No class selected');\n      }\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      const requestPath = wasabiStorage.getClassJoinRequestPath(teacherEmail, selectedClass.code, studentEmail);\n\n      // Delete the join request\n      await wasabiStorage.deleteData(requestPath);\n\n      // Reload teacher data to refresh the UI\n      await loadTeacherData(teacherEmail);\n    } catch (error) {\n      console.error('Error denying student:', error);\n      setError('Failed to deny student');\n    }\n  };\n  const removeStudent = async studentId => {\n    try {\n      if (selectedClass) {\n        const updatedClasses = classes.map(c => {\n          if (c.id === selectedClass.id) {\n            return {\n              ...c,\n              students: c.students.filter(s => s.id !== studentId)\n            };\n          }\n          return c;\n        });\n        await infuraStorage.saveData(`classes_${sessionStorage.getItem('userEmail')}`, updatedClasses);\n        setClasses(updatedClasses);\n      }\n    } catch (error) {\n      console.error('Error removing student:', error);\n      setError('Failed to remove student');\n    }\n  };\n  const handleDownload = async () => {\n    try {\n      // Get the teacher app executable as binary data\n      const data = await wasabiStorage.getBinaryData('Teacher App.exe');\n      if (!data) {\n        throw new Error('Failed to download teacher app');\n      }\n\n      // Create a blob from the binary data\n      const blob = new Blob([data], {\n        type: 'application/x-msdownload'\n      });\n      const url = window.URL.createObjectURL(blob);\n\n      // Create a temporary link and click it to start the download\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'Teacher App.exe';\n      document.body.appendChild(link);\n      link.click();\n\n      // Clean up\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error downloading teacher app:', error);\n      alert('Failed to download teacher app. Please try again later.');\n    }\n  };\n  const handleRecordingSave = async recordingData => {\n    try {\n      if (!selectedClass) {\n        throw new Error('No class selected');\n      }\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      const recordingId = Date.now().toString();\n      const recordingPath = wasabiStorage.getRecordingPath(teacherEmail, selectedClass.code, recordingId);\n      await wasabiStorage.saveData(recordingPath, {\n        ...recordingData,\n        id: recordingId,\n        timestamp: new Date().toISOString()\n      });\n\n      // Reload recordings\n      await loadRecordings(teacherEmail);\n    } catch (error) {\n      console.error('Error saving recording:', error);\n      setError('Failed to save recording');\n    }\n  };\n  const loadSummaries = async teacherEmail => {\n    try {\n      if (!selectedClass) {\n        return;\n      }\n      const summariesData = await wasabiStorage.listObjects(wasabiStorage.getSummariesPath(teacherEmail, selectedClass.code));\n      const loadedSummaries = [];\n      for (const summary of summariesData) {\n        if (summary.Key.endsWith('.json')) {\n          const summaryData = await wasabiStorage.getData(summary.Key);\n          if (summaryData) {\n            loadedSummaries.push(summaryData);\n          }\n        }\n      }\n      setSelectedClass({\n        ...selectedClass,\n        summaries: loadedSummaries\n      });\n    } catch (error) {\n      console.error('Error loading summaries:', error);\n      setError('Failed to load summaries');\n    }\n  };\n  const renderContent = () => {\n    if (!selectedClass) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"classes-list\",\n        children: [classes.map(cls => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"class-item\",\n          onClick: () => setSelectedClass(cls),\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: cls.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"class-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Class Code: \", cls.code]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [cls.students.length, \" Students\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this)]\n        }, cls.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }, this)), showCreateClass ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-class-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newClassName,\n            onChange: e => setNewClassName(e.target.value),\n            placeholder: \"Enter class name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: createClass,\n              children: \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowCreateClass(false),\n              className: \"secondary-button\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCreateClass(true),\n          className: \"create-class-button\",\n          children: \"Create New Class\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"class-dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"class-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSelectedClass(null),\n          className: \"back-to-classes\",\n          children: \"\\u2190 Back to Classes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: selectedClass.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"class-code\",\n          children: [\"Class Code: \", selectedClass.code]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'recordings' ? 'active' : ''}`,\n          onClick: () => setActiveTab('recordings'),\n          children: \"Recordings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'summaries' ? 'active' : ''}`,\n          onClick: () => setActiveTab('summaries'),\n          children: \"Summaries\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'students' ? 'active' : ''}`,\n          onClick: () => setActiveTab('students'),\n          children: \"Manage Students\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), activeTab === 'recordings' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recordings-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recording-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `record-button ${isRecording ? 'recording' : ''}`,\n            onClick: isRecording ? stopRecording : startRecording,\n            children: isRecording ? 'Stop Recording' : 'Record Lecture'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recording-timer\",\n            children: [\"Recording: \", formatTime(recordingTime)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recordings-list\",\n          children: selectedClass.recordings.map(recording => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recording-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"recording-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"recording-date\",\n                children: new Date(recording.timestamp).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"recording-duration\",\n                children: [\"Duration: \", formatTime(recording.duration)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"recording-path\",\n              children: [\"File: \", recording.localPath]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 19\n            }, this)]\n          }, recording.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }, this), activeTab === 'summaries' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summaries-list\",\n        children: selectedClass.summaries.map(summary => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-date\",\n            children: new Date(summary.timestamp).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-content\",\n            children: summary.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 17\n          }, this)]\n        }, summary.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }, this), activeTab === 'students' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"students-management\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pending-students\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Pending Approvals\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 15\n          }, this), selectedClass.pendingStudents && selectedClass.pendingStudents.length > 0 ? selectedClass.pendingStudents.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pending-student-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"student-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"student-name\",\n                children: student.studentName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"student-email\",\n                children: student.studentEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"approval-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => approveStudent(student.studentEmail),\n                className: \"approve-button\",\n                children: \"Approve\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => denyStudent(student.studentEmail),\n                className: \"decline-button\",\n                children: \"Deny\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 21\n            }, this)]\n          }, student.studentEmail, true, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 19\n          }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No pending approvals\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"enrolled-students\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Enrolled Students\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 15\n          }, this), selectedClass.students.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"enrolled-student-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"student-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"student-name\",\n                children: student.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"student-email\",\n                children: student.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeStudent(student.id),\n              className: \"remove-button\",\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 19\n            }, this)]\n          }, student.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading teacher dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 12\n    }, this);\n  }\n\n  // If the teacher account is pending approval\n  if (teacherData && teacherData.pending) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pending-approval\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Account Pending Approval\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your teacher account is pending administrator approval.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please check back later or contact the administrator for more information.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"logout-button\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"storage-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"storage-dot infura-active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Using Infura Blockchain Storage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 11\n        }, this), isConnecting && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"connecting-message\",\n          children: \"Connecting to Infura...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 28\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(BackButton, {\n        destination: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Teacher Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"logout-button\",\n        onClick: () => {\n          sessionStorage.removeItem('userEmail');\n          sessionStorage.removeItem('userRole');\n          navigate('/');\n        },\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"storage-indicator\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"storage-dot infura-active\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Using Infura Blockchain Storage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 7\n    }, this), isConnecting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connecting-message\",\n      children: \"Connecting to Infura...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 24\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"download-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Download Teacher App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click the button below to download the Teacher App for your desktop.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"download-button\",\n          onClick: handleDownload,\n          children: \"Download Teacher App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 9\n      }, this), renderContent()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 655,\n    columnNumber: 5\n  }, this);\n}\n_s(TeacherDashboard, \"JFumLPIpCl/kU2V7alsLH3s4Eiw=\", false, function () {\n  return [useNavigate];\n});\n_c = TeacherDashboard;\nexport default TeacherDashboard;\nvar _c;\n$RefreshReg$(_c, \"TeacherDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","BackButton","infuraStorage","wasabiStorage","jsxDEV","_jsxDEV","TeacherDashboard","_s","classes","setClasses","showCreateClass","setShowCreateClass","newClassName","setNewClassName","selectedClass","setSelectedClass","pendingStudents","setPendingStudents","activeTab","setActiveTab","recordings","setRecordings","teacherData","setTeacherData","loading","setLoading","isConnecting","setIsConnecting","error","setError","isRecording","setIsRecording","recordingTime","setRecordingTime","mediaRecorderRef","timeIntervalRef","chunksRef","navigate","connectAndLoadTeacherData","useCallback","teacherEmail","connectResult","connect","success","loadTeacherData","loadRecordings","message","console","recordingsData","listObjects","getRecordingsPath","code","loadedRecordings","recording","Key","endsWith","recordingData","getData","push","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","current","ondataavailable","e","data","size","onstop","blob","Blob","type","url","URL","createObjectURL","timestamp","Date","toISOString","newRecording","id","now","duration","localPath","updatedRecordings","updatedClass","updatedClasses","map","c","sessionStorage","getItem","saveData","reader","FileReader","readAsDataURL","onloadend","localStorage","setItem","result","getTracks","forEach","track","stop","start","setInterval","prev","stopRecording","clearInterval","formatTime","seconds","mins","Math","floor","secs","toString","padStart","document","body","classList","add","remove","getTeacherPath","classesData","getTeacherClassesPath","loadedClasses","classObj","classData","classCode","joinRequestsPath","log","joinRequests","request","requestData","status","createClass","trim","generateClassCode","chars","i","charAt","random","length","classPath","getClassPath","recordingsPath","summariesPath","getSummariesPath","Promise","all","s3","putObject","Bucket","bucket","Body","ContentType","promise","name","students","createdAt","alert","approveStudent","studentEmail","Error","requestPath","getClassJoinRequestPath","joinRequest","updatedRequest","studentData","getStudentPath","updatedStudentData","joinedAt","denyStudent","deleteData","removeStudent","studentId","filter","s","handleDownload","getBinaryData","window","link","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","handleRecordingSave","recordingId","recordingPath","getRecordingPath","loadSummaries","summariesData","loadedSummaries","summary","summaryData","summaries","renderContent","className","children","cls","onClick","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","placeholder","toLocaleString","content","student","studentName","email","pending","destination","removeItem","_c","$RefreshReg$"],"sources":["D:/dadas/he true randomizer/theta/my-app/src/components/TeacherDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BackButton from './BackButton';\nimport infuraStorage from '../services/MetaMaskStorage';\nimport wasabiStorage from '../services/WasabiStorage';\n\nfunction TeacherDashboard() {\n  const [classes, setClasses] = useState([]);\n  const [showCreateClass, setShowCreateClass] = useState(false);\n  const [newClassName, setNewClassName] = useState('');\n  const [selectedClass, setSelectedClass] = useState(null);\n  const [pendingStudents, setPendingStudents] = useState([]);\n  const [activeTab, setActiveTab] = useState('classes');\n  const [recordings, setRecordings] = useState([]);\n  const [teacherData, setTeacherData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const mediaRecorderRef = useRef(null);\n  const timeIntervalRef = useRef(null);\n  const chunksRef = useRef([]);\n  const navigate = useNavigate();\n\n  // Memoize the connectAndLoadTeacherData function to prevent infinite loop\n  const connectAndLoadTeacherData = React.useCallback(async (teacherEmail) => {\n    try {\n      setIsConnecting(true);\n      setError('');\n      \n      // Connect to Infura\n      const connectResult = await infuraStorage.connect();\n      if (!connectResult.success) {\n        setError(`Infura connection error: ${connectResult.error}`);\n        setLoading(false);\n        return;\n      }\n      \n      await loadTeacherData(teacherEmail);\n      await loadRecordings(teacherEmail);\n      setLoading(false); // Set loading to false after all data is loaded\n    } catch (error) {\n      setError(`Error connecting to Infura: ${error.message}`);\n      console.error('Connection error:', error);\n      setLoading(false);\n    } finally {\n      setIsConnecting(false);\n    }\n  }, []);\n\n  const loadRecordings = async (teacherEmail) => {\n    try {\n      if (!selectedClass) {\n        return;\n      }\n\n      const recordingsData = await wasabiStorage.listObjects(\n        wasabiStorage.getRecordingsPath(teacherEmail, selectedClass.code)\n      );\n      const loadedRecordings = [];\n\n      for (const recording of recordingsData) {\n        if (recording.Key.endsWith('.json')) {\n          const recordingData = await wasabiStorage.getData(recording.Key);\n          if (recordingData) {\n            loadedRecordings.push(recordingData);\n          }\n        }\n      }\n\n      setRecordings(loadedRecordings);\n    } catch (error) {\n      console.error('Error loading recordings:', error);\n      setError('Failed to load recordings');\n    }\n  };\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = mediaRecorder;\n      chunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (e) => {\n        if (e.data.size > 0) {\n          chunksRef.current.push(e.data);\n        }\n      };\n\n      mediaRecorder.onstop = async () => {\n        const blob = new Blob(chunksRef.current, { type: 'audio/webm' });\n        const url = URL.createObjectURL(blob);\n        const timestamp = new Date().toISOString();\n        const newRecording = {\n          id: Date.now(),\n          url,\n          timestamp,\n          duration: recordingTime,\n          localPath: `recording_${timestamp}.webm`\n        };\n\n        // Update recordings state\n        const updatedRecordings = [...recordings, newRecording];\n        setRecordings(updatedRecordings);\n        \n        // Update selected class recordings\n        if (selectedClass) {\n          const updatedClass = {\n            ...selectedClass,\n            recordings: [...selectedClass.recordings, newRecording]\n          };\n          setSelectedClass(updatedClass);\n\n          // Update classes state\n          const updatedClasses = classes.map(c => \n            c.id === selectedClass.id ? updatedClass : c\n          );\n          setClasses(updatedClasses);\n\n          // Save to Infura\n          const teacherEmail = sessionStorage.getItem('userEmail');\n          await infuraStorage.saveData(`classes_${teacherEmail}`, updatedClasses);\n        }\n        \n        // Save recording data\n        await infuraStorage.saveData(`recordings_${sessionStorage.getItem('userEmail')}`, updatedRecordings);\n\n        // Save to local storage\n        const reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = () => {\n          localStorage.setItem(`recording_${timestamp}`, reader.result);\n        };\n\n        stream.getTracks().forEach(track => track.stop());\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingTime(0);\n      timeIntervalRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      setError('Failed to start recording. Please check your microphone permissions.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      clearInterval(timeIntervalRef.current);\n      setIsRecording(false);\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  useEffect(() => {\n    document.body.classList.add('dashboard-page');\n    const teacherEmail = sessionStorage.getItem('userEmail');\n    connectAndLoadTeacherData(teacherEmail);\n    \n    return () => {\n      document.body.classList.remove('dashboard-page');\n      if (timeIntervalRef.current) {\n        clearInterval(timeIntervalRef.current);\n      }\n      if (mediaRecorderRef.current && isRecording) {\n        mediaRecorderRef.current.stop();\n      }\n    };\n  }, [connectAndLoadTeacherData, isRecording]);\n\n  const loadTeacherData = async (teacherEmail) => {\n    try {\n      // Get teacher data\n      const teacherData = await wasabiStorage.getData(wasabiStorage.getTeacherPath(teacherEmail));\n      if (!teacherData) {\n        setError('Teacher data not found');\n        return;\n      }\n      setTeacherData(teacherData);\n\n      // List all classes\n      const classesData = await wasabiStorage.listObjects(wasabiStorage.getTeacherClassesPath(teacherEmail));\n      const loadedClasses = [];\n\n      for (const classObj of classesData) {\n        if (classObj.Key.endsWith('info.json')) {\n          const classData = await wasabiStorage.getData(classObj.Key);\n          if (classData) {\n            // Load join requests for this class\n            const classCode = classData.code;\n            const joinRequestsPath = `Skyline/teachers/${teacherEmail}/classes/${classCode}/join-requests/`;\n            console.log('Checking join requests at:', joinRequestsPath);\n            \n            const joinRequests = await wasabiStorage.listObjects(joinRequestsPath);\n            console.log('Found join requests:', joinRequests);\n            \n            const pendingStudents = [];\n            for (const request of joinRequests) {\n              if (request.Key.endsWith('.json')) {\n                const requestData = await wasabiStorage.getData(request.Key);\n                if (requestData && requestData.status === 'pending') {\n                  pendingStudents.push(requestData);\n                }\n              }\n            }\n            \n            classData.pendingStudents = pendingStudents;\n            loadedClasses.push(classData);\n          }\n        }\n      }\n\n      console.log('Loaded classes with pending students:', loadedClasses);\n      setClasses(loadedClasses);\n    } catch (error) {\n      console.error('Error loading teacher data:', error);\n      setError('Failed to load teacher data');\n    }\n  };\n\n  const createClass = async () => {\n    if (!newClassName.trim()) {\n      setError('Please enter a class name');\n      return;\n    }\n\n    try {\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      \n      // Generate a unique 6-character class code\n      const generateClassCode = () => {\n        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n        let code = '';\n        for (let i = 0; i < 6; i++) {\n          code += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return code;\n      };\n\n      const classCode = generateClassCode();\n      \n      // Create class folder structure\n      const classPath = wasabiStorage.getClassPath(teacherEmail, classCode);\n      const recordingsPath = wasabiStorage.getRecordingsPath(teacherEmail, classCode);\n      const summariesPath = wasabiStorage.getSummariesPath(teacherEmail, classCode);\n\n      // Create the folders\n      await Promise.all([\n        wasabiStorage.s3.putObject({\n          Bucket: wasabiStorage.bucket,\n          Key: recordingsPath,\n          Body: '',\n          ContentType: 'application/x-directory'\n        }).promise(),\n        wasabiStorage.s3.putObject({\n          Bucket: wasabiStorage.bucket,\n          Key: summariesPath,\n          Body: '',\n          ContentType: 'application/x-directory'\n        }).promise()\n      ]);\n\n      // Create class data\n      const classData = {\n        name: newClassName.trim(),\n        code: classCode,\n        teacherEmail,\n        students: [],\n        pendingStudents: [],\n        createdAt: new Date().toISOString()\n      };\n\n      // Save class info\n      await wasabiStorage.saveData(classPath, classData);\n\n      // Update UI\n      setClasses([...classes, classData]);\n      setNewClassName('');\n      setShowCreateClass(false);\n      \n      // Show success message with class code\n      alert(`Class created successfully! Class code: ${classCode}`);\n    } catch (error) {\n      console.error('Error creating class:', error);\n      setError('Failed to create class');\n    }\n  };\n\n  const approveStudent = async (studentEmail) => {\n    try {\n      if (!selectedClass) {\n        throw new Error('No class selected');\n      }\n\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      const requestPath = wasabiStorage.getClassJoinRequestPath(teacherEmail, selectedClass.code, studentEmail);\n      const joinRequest = await wasabiStorage.getData(requestPath);\n\n      if (!joinRequest) {\n        throw new Error('Join request not found');\n      }\n\n      // Update join request status\n      const updatedRequest = {\n        ...joinRequest,\n        status: 'approved'\n      };\n      await wasabiStorage.saveData(requestPath, updatedRequest);\n\n      // Update student's classes in their data\n      const studentData = await wasabiStorage.getData(wasabiStorage.getStudentPath(studentEmail));\n      if (studentData) {\n        const updatedStudentData = {\n          ...studentData,\n          classes: [...(studentData.classes || []), {\n            code: selectedClass.code,\n            teacherEmail: teacherEmail,\n            joinedAt: new Date().toISOString()\n          }]\n        };\n        await wasabiStorage.saveData(wasabiStorage.getStudentPath(studentEmail), updatedStudentData);\n      }\n\n      // Reload teacher data to refresh the UI\n      await loadTeacherData(teacherEmail);\n    } catch (error) {\n      console.error('Error approving student:', error);\n      setError('Failed to approve student');\n    }\n  };\n\n  const denyStudent = async (studentEmail) => {\n    try {\n      if (!selectedClass) {\n        throw new Error('No class selected');\n      }\n\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      const requestPath = wasabiStorage.getClassJoinRequestPath(teacherEmail, selectedClass.code, studentEmail);\n      \n      // Delete the join request\n      await wasabiStorage.deleteData(requestPath);\n\n      // Reload teacher data to refresh the UI\n      await loadTeacherData(teacherEmail);\n    } catch (error) {\n      console.error('Error denying student:', error);\n      setError('Failed to deny student');\n    }\n  };\n\n  const removeStudent = async (studentId) => {\n    try {\n      if (selectedClass) {\n        const updatedClasses = classes.map(c => {\n          if (c.id === selectedClass.id) {\n            return {\n              ...c,\n              students: c.students.filter(s => s.id !== studentId)\n            };\n          }\n          return c;\n        });\n\n        await infuraStorage.saveData(`classes_${sessionStorage.getItem('userEmail')}`, updatedClasses);\n        setClasses(updatedClasses);\n      }\n    } catch (error) {\n      console.error('Error removing student:', error);\n      setError('Failed to remove student');\n    }\n  };\n\n  const handleDownload = async () => {\n    try {\n      // Get the teacher app executable as binary data\n      const data = await wasabiStorage.getBinaryData('Teacher App.exe');\n      if (!data) {\n        throw new Error('Failed to download teacher app');\n      }\n\n      // Create a blob from the binary data\n      const blob = new Blob([data], { type: 'application/x-msdownload' });\n      const url = window.URL.createObjectURL(blob);\n      \n      // Create a temporary link and click it to start the download\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'Teacher App.exe';\n      document.body.appendChild(link);\n      link.click();\n      \n      // Clean up\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Error downloading teacher app:', error);\n      alert('Failed to download teacher app. Please try again later.');\n    }\n  };\n\n  const handleRecordingSave = async (recordingData) => {\n    try {\n      if (!selectedClass) {\n        throw new Error('No class selected');\n      }\n\n      const teacherEmail = sessionStorage.getItem('userEmail');\n      const recordingId = Date.now().toString();\n      const recordingPath = wasabiStorage.getRecordingPath(teacherEmail, selectedClass.code, recordingId);\n\n      await wasabiStorage.saveData(recordingPath, {\n        ...recordingData,\n        id: recordingId,\n        timestamp: new Date().toISOString()\n      });\n\n      // Reload recordings\n      await loadRecordings(teacherEmail);\n    } catch (error) {\n      console.error('Error saving recording:', error);\n      setError('Failed to save recording');\n    }\n  };\n\n  const loadSummaries = async (teacherEmail) => {\n    try {\n      if (!selectedClass) {\n        return;\n      }\n\n      const summariesData = await wasabiStorage.listObjects(\n        wasabiStorage.getSummariesPath(teacherEmail, selectedClass.code)\n      );\n      const loadedSummaries = [];\n\n      for (const summary of summariesData) {\n        if (summary.Key.endsWith('.json')) {\n          const summaryData = await wasabiStorage.getData(summary.Key);\n          if (summaryData) {\n            loadedSummaries.push(summaryData);\n          }\n        }\n      }\n\n      setSelectedClass({\n        ...selectedClass,\n        summaries: loadedSummaries\n      });\n    } catch (error) {\n      console.error('Error loading summaries:', error);\n      setError('Failed to load summaries');\n    }\n  };\n\n  const renderContent = () => {\n    if (!selectedClass) {\n      return (\n        <div className=\"classes-list\">\n          {classes.map(cls => (\n            <div key={cls.id} className=\"class-item\" onClick={() => setSelectedClass(cls)}>\n              <h3>{cls.name}</h3>\n              <div className=\"class-info\">\n                <span>Class Code: {cls.code}</span>\n                <span>{cls.students.length} Students</span>\n              </div>\n            </div>\n          ))}\n          \n          {showCreateClass ? (\n            <div className=\"create-class-form\">\n              <input\n                type=\"text\"\n                value={newClassName}\n                onChange={(e) => setNewClassName(e.target.value)}\n                placeholder=\"Enter class name\"\n              />\n              <div className=\"form-actions\">\n                <button onClick={createClass}>Create</button>\n                <button onClick={() => setShowCreateClass(false)} className=\"secondary-button\">\n                  Cancel\n                </button>\n              </div>\n            </div>\n          ) : (\n            <button onClick={() => setShowCreateClass(true)} className=\"create-class-button\">\n              Create New Class\n            </button>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"class-dashboard\">\n        <div className=\"class-header\">\n          <button onClick={() => setSelectedClass(null)} className=\"back-to-classes\">\n            ← Back to Classes\n          </button>\n          <h2>{selectedClass.name}</h2>\n          <div className=\"class-code\">Class Code: {selectedClass.code}</div>\n        </div>\n\n        <div className=\"tab-navigation\">\n          <button \n            className={`tab-button ${activeTab === 'recordings' ? 'active' : ''}`}\n            onClick={() => setActiveTab('recordings')}\n          >\n            Recordings\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'summaries' ? 'active' : ''}`}\n            onClick={() => setActiveTab('summaries')}\n          >\n            Summaries\n          </button>\n          <button \n            className={`tab-button ${activeTab === 'students' ? 'active' : ''}`}\n            onClick={() => setActiveTab('students')}\n          >\n            Manage Students\n          </button>\n        </div>\n\n        {activeTab === 'recordings' && (\n          <div className=\"recordings-section\">\n            <div className=\"recording-controls\">\n              <button \n                className={`record-button ${isRecording ? 'recording' : ''}`}\n                onClick={isRecording ? stopRecording : startRecording}\n              >\n                {isRecording ? 'Stop Recording' : 'Record Lecture'}\n              </button>\n              {isRecording && (\n                <div className=\"recording-timer\">\n                  Recording: {formatTime(recordingTime)}\n                </div>\n              )}\n            </div>\n            <div className=\"recordings-list\">\n              {selectedClass.recordings.map(recording => (\n                <div key={recording.id} className=\"recording-item\">\n                  <div className=\"recording-info\">\n                    <span className=\"recording-date\">\n                      {new Date(recording.timestamp).toLocaleString()}\n                    </span>\n                    <span className=\"recording-duration\">\n                      Duration: {formatTime(recording.duration)}\n                    </span>\n                  </div>\n                  <div className=\"recording-path\">\n                    File: {recording.localPath}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'summaries' && (\n          <div className=\"summaries-list\">\n            {selectedClass.summaries.map(summary => (\n              <div key={summary.id} className=\"summary-item\">\n                <div className=\"summary-date\">{new Date(summary.timestamp).toLocaleString()}</div>\n                <div className=\"summary-content\">{summary.content}</div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {activeTab === 'students' && (\n          <div className=\"students-management\">\n            <div className=\"pending-students\">\n              <h3>Pending Approvals</h3>\n              {selectedClass.pendingStudents && selectedClass.pendingStudents.length > 0 ? (\n                selectedClass.pendingStudents.map(student => (\n                  <div key={student.studentEmail} className=\"pending-student-item\">\n                    <div className=\"student-info\">\n                      <div className=\"student-name\">{student.studentName}</div>\n                      <div className=\"student-email\">{student.studentEmail}</div>\n                    </div>\n                    <div className=\"approval-buttons\">\n                      <button onClick={() => approveStudent(student.studentEmail)} className=\"approve-button\">\n                        Approve\n                      </button>\n                      <button onClick={() => denyStudent(student.studentEmail)} className=\"decline-button\">\n                        Deny\n                      </button>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                <p>No pending approvals</p>\n              )}\n            </div>\n\n            <div className=\"enrolled-students\">\n              <h3>Enrolled Students</h3>\n              {selectedClass.students.map(student => (\n                <div key={student.id} className=\"enrolled-student-item\">\n                  <div className=\"student-info\">\n                    <div className=\"student-name\">{student.name}</div>\n                    <div className=\"student-email\">{student.email}</div>\n                  </div>\n                  <button onClick={() => removeStudent(student.id)} className=\"remove-button\">\n                    Remove\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading teacher dashboard...</div>;\n  }\n\n  // If the teacher account is pending approval\n  if (teacherData && teacherData.pending) {\n    return (\n      <div className=\"dashboard-container\">\n        <div className=\"pending-approval\">\n          <h2>Account Pending Approval</h2>\n          <p>Your teacher account is pending administrator approval.</p>\n          <p>Please check back later or contact the administrator for more information.</p>\n          <button onClick={() => navigate('/')} className=\"logout-button\">Logout</button>\n          \n          <div className=\"storage-indicator\">\n            <div className=\"storage-dot infura-active\"></div>\n            <span>Using Infura Blockchain Storage</span>\n          </div>\n          \n          {isConnecting && <div className=\"connecting-message\">Connecting to Infura...</div>}\n          {error && <div className=\"error-message\">{error}</div>}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-container\">\n      <div className=\"dashboard-header\">\n        <BackButton destination=\"/\" />\n        <h2>Teacher Dashboard</h2>\n        <button \n          className=\"logout-button\" \n          onClick={() => {\n            sessionStorage.removeItem('userEmail');\n            sessionStorage.removeItem('userRole');\n            navigate('/');\n          }}\n        >\n          Logout\n        </button>\n      </div>\n      \n      <div className=\"storage-indicator\">\n        <div className=\"storage-dot infura-active\"></div>\n        <span>Using Infura Blockchain Storage</span>\n      </div>\n      \n      {isConnecting && <div className=\"connecting-message\">Connecting to Infura...</div>}\n      {error && <div className=\"error-message\">{error}</div>}\n      \n      <div className=\"dashboard-content\">\n        <div className=\"download-section\">\n          <h3>Download Teacher App</h3>\n          <p>Click the button below to download the Teacher App for your desktop.</p>\n          <button className=\"download-button\" onClick={handleDownload}>\n            Download Teacher App\n          </button>\n        </div>\n        {renderContent()}\n      </div>\n    </div>\n  );\n}\n\nexport default TeacherDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}