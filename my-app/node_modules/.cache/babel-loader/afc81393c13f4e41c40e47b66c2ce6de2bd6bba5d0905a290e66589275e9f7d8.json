{"ast":null,"code":"import AWS from 'aws-sdk';\n\n// Initialize the Wasabi storage service\n// Note: In a real implementation, these credentials would be stored securely \n// and potentially fetched from environment variables or a backend service\nclass WasabiStorage {\n  constructor() {\n    console.log('========== WASABI STORAGE INITIALIZED ==========');\n    console.log('USING WASABI CLOUD STORAGE - NOT USING LOCALSTORAGE');\n    console.log(`Bucket: thetatest, Endpoint: https://s3.us-west-1.wasabisys.com`);\n\n    // Configure the Wasabi connection\n    this.s3 = new AWS.S3({\n      endpoint: 'https://s3.us-west-1.wasabisys.com',\n      accessKeyId: 'W7X9U7PACFCWQZHRJBRH',\n      secretAccessKey: 'Xc3tkWt1W0tGSMhEN3w6WTPJNsOlWYuhtirgV9Dc',\n      region: 'us-west-1',\n      s3ForcePathStyle: true // Required for Wasabi\n    });\n    this.bucket = 'thetatest';\n    this.folder = 'app-data/'; // Using a folder to organize data\n\n    // Never fall back to localStorage\n    this.useLocalStorage = false;\n\n    // Create the folder if it doesn't exist\n    this.ensureFolder();\n\n    // Test connection during initialization but don't fall back\n    this.testConnection();\n    console.log('==============================================');\n  }\n\n  // Ensure the folder exists in the bucket\n  async ensureFolder() {\n    try {\n      const folderKey = this.folder;\n\n      // Create an empty object as the folder placeholder\n      const params = {\n        Bucket: this.bucket,\n        Key: folderKey,\n        Body: '',\n        ContentType: 'application/x-directory'\n      };\n      await this.s3.putObject(params).promise();\n      console.log(`Created folder '${folderKey}' in bucket`);\n    } catch (error) {\n      console.error(`Error creating folder: ${error.message}`);\n      // Continue even if folder creation fails, it might already exist\n    }\n  }\n\n  // Test the Wasabi connection\n  async testConnection() {\n    try {\n      console.log('Testing Wasabi connection...');\n      // Check if bucket exists\n      const response = await this.s3.headBucket({\n        Bucket: this.bucket\n      }).promise();\n      console.log('Wasabi connection successful:', response);\n      return true;\n    } catch (error) {\n      console.error('Wasabi connection test failed:', error.message, error.code);\n      // Don't fall back to localStorage - just report the error\n      console.error('WARNING: Wasabi storage is not working but fallback is disabled');\n      return false;\n    }\n  }\n\n  // Save data to Wasabi\n  async saveData(key, data) {\n    // Add folder prefix to the key\n    const fullKey = this.folder + key;\n\n    // Never use localStorage\n    try {\n      console.log(`Attempting to save data to Wasabi. Key: ${fullKey}, Bucket: ${this.bucket}`);\n      const params = {\n        Bucket: this.bucket,\n        Key: fullKey,\n        Body: JSON.stringify(data),\n        ContentType: 'application/json'\n      };\n      const response = await this.s3.putObject(params).promise();\n      console.log('Wasabi save successful:', response);\n      return {\n        success: true,\n        response\n      };\n    } catch (error) {\n      console.error('Detailed error saving to Wasabi:', error.message, error.code, error.statusCode);\n      // Don't fall back to localStorage\n      throw new Error(`Failed to save to Wasabi: ${error.message}`);\n    }\n  }\n\n  // Get data from Wasabi\n  async getData(key) {\n    // Add folder prefix to the key\n    const fullKey = this.folder + key;\n\n    // Never use localStorage\n    try {\n      console.log(`Attempting to get data from Wasabi. Key: ${fullKey}, Bucket: ${this.bucket}`);\n      const params = {\n        Bucket: this.bucket,\n        Key: fullKey\n      };\n      const response = await this.s3.getObject(params).promise();\n      console.log('Wasabi get successful');\n      return JSON.parse(response.Body.toString());\n    } catch (error) {\n      // If the object doesn't exist, return null instead of throwing an error\n      if (error.code === 'NoSuchKey') {\n        console.log('Key not found in Wasabi, returning null');\n        return null;\n      }\n      console.error('Detailed error getting from Wasabi:', error.message, error.code, error.statusCode);\n      // Don't fall back to localStorage\n      throw new Error(`Failed to get data from Wasabi: ${error.message}`);\n    }\n  }\n\n  // Update specific data in Wasabi\n  async updateData(key, updateFunction) {\n    let data = await this.getData(key);\n\n    // If data doesn't exist yet, initialize with empty object or array\n    if (!data) {\n      data = typeof updateFunction(null) === 'object' ? {} : [];\n    }\n\n    // Apply the update function to modify the data\n    const updatedData = updateFunction(data);\n\n    // Save the updated data back to Wasabi\n    return await this.saveData(key, updatedData);\n  }\n\n  // Delete data from Wasabi\n  async deleteData(key) {\n    // Add folder prefix to the key\n    const fullKey = this.folder + key;\n\n    // Never use localStorage\n    try {\n      console.log(`Attempting to delete data from Wasabi. Key: ${fullKey}, Bucket: ${this.bucket}`);\n      const params = {\n        Bucket: this.bucket,\n        Key: fullKey\n      };\n      const response = await this.s3.deleteObject(params).promise();\n      console.log('Wasabi delete successful:', response);\n      return {\n        success: true,\n        response\n      };\n    } catch (error) {\n      console.error('Detailed error deleting from Wasabi:', error.message, error.code, error.statusCode);\n      // Don't fall back to localStorage\n      throw new Error(`Failed to delete from Wasabi: ${error.message}`);\n    }\n  }\n  async listObjects(prefix) {\n    const data = await this.s3.listObjectsV2({\n      Bucket: this.bucket,\n      Prefix: prefix\n    }).promise();\n    return data.Contents;\n  }\n  async deleteObject(key) {\n    await this.s3.deleteObject({\n      Bucket: this.bucket,\n      Key: key\n    }).promise();\n  }\n}\n\n// Create and export a singleton instance\nconst wasabiStorage = new WasabiStorage();\nexport default wasabiStorage;","map":{"version":3,"names":["AWS","WasabiStorage","constructor","console","log","s3","S3","endpoint","accessKeyId","secretAccessKey","region","s3ForcePathStyle","bucket","folder","useLocalStorage","ensureFolder","testConnection","folderKey","params","Bucket","Key","Body","ContentType","putObject","promise","error","message","response","headBucket","code","saveData","key","data","fullKey","JSON","stringify","success","statusCode","Error","getData","getObject","parse","toString","updateData","updateFunction","updatedData","deleteData","deleteObject","listObjects","prefix","listObjectsV2","Prefix","Contents","wasabiStorage"],"sources":["D:/dadas/he true randomizer/theta/my-app/src/services/WasabiStorage.js"],"sourcesContent":["import AWS from 'aws-sdk';\n\n// Initialize the Wasabi storage service\n// Note: In a real implementation, these credentials would be stored securely \n// and potentially fetched from environment variables or a backend service\nclass WasabiStorage {\n  constructor() {\n    console.log('========== WASABI STORAGE INITIALIZED ==========');\n    console.log('USING WASABI CLOUD STORAGE - NOT USING LOCALSTORAGE');\n    console.log(`Bucket: thetatest, Endpoint: https://s3.us-west-1.wasabisys.com`);\n    \n    // Configure the Wasabi connection\n    this.s3 = new AWS.S3({\n      endpoint: 'https://s3.us-west-1.wasabisys.com',\n      accessKeyId: 'W7X9U7PACFCWQZHRJBRH',\n      secretAccessKey: 'Xc3tkWt1W0tGSMhEN3w6WTPJNsOlWYuhtirgV9Dc',\n      region: 'us-west-1',\n      s3ForcePathStyle: true, // Required for Wasabi\n    });\n    \n    this.bucket = 'thetatest';\n    this.folder = 'app-data/'; // Using a folder to organize data\n    \n    // Never fall back to localStorage\n    this.useLocalStorage = false;\n    \n    // Create the folder if it doesn't exist\n    this.ensureFolder();\n    \n    // Test connection during initialization but don't fall back\n    this.testConnection();\n    \n    console.log('==============================================');\n  }\n  \n  // Ensure the folder exists in the bucket\n  async ensureFolder() {\n    try {\n      const folderKey = this.folder;\n      \n      // Create an empty object as the folder placeholder\n      const params = {\n        Bucket: this.bucket,\n        Key: folderKey,\n        Body: '',\n        ContentType: 'application/x-directory'\n      };\n      \n      await this.s3.putObject(params).promise();\n      console.log(`Created folder '${folderKey}' in bucket`);\n    } catch (error) {\n      console.error(`Error creating folder: ${error.message}`);\n      // Continue even if folder creation fails, it might already exist\n    }\n  }\n  \n  // Test the Wasabi connection\n  async testConnection() {\n    try {\n      console.log('Testing Wasabi connection...');\n      // Check if bucket exists\n      const response = await this.s3.headBucket({ Bucket: this.bucket }).promise();\n      console.log('Wasabi connection successful:', response);\n      return true;\n    } catch (error) {\n      console.error('Wasabi connection test failed:', error.message, error.code);\n      // Don't fall back to localStorage - just report the error\n      console.error('WARNING: Wasabi storage is not working but fallback is disabled');\n      return false;\n    }\n  }\n  \n  // Save data to Wasabi\n  async saveData(key, data) {\n    // Add folder prefix to the key\n    const fullKey = this.folder + key;\n    \n    // Never use localStorage\n    try {\n      console.log(`Attempting to save data to Wasabi. Key: ${fullKey}, Bucket: ${this.bucket}`);\n      const params = {\n        Bucket: this.bucket,\n        Key: fullKey,\n        Body: JSON.stringify(data),\n        ContentType: 'application/json',\n      };\n      \n      const response = await this.s3.putObject(params).promise();\n      console.log('Wasabi save successful:', response);\n      return { success: true, response };\n    } catch (error) {\n      console.error('Detailed error saving to Wasabi:', error.message, error.code, error.statusCode);\n      // Don't fall back to localStorage\n      throw new Error(`Failed to save to Wasabi: ${error.message}`);\n    }\n  }\n  \n  // Get data from Wasabi\n  async getData(key) {\n    // Add folder prefix to the key\n    const fullKey = this.folder + key;\n    \n    // Never use localStorage\n    try {\n      console.log(`Attempting to get data from Wasabi. Key: ${fullKey}, Bucket: ${this.bucket}`);\n      const params = {\n        Bucket: this.bucket,\n        Key: fullKey,\n      };\n      \n      const response = await this.s3.getObject(params).promise();\n      console.log('Wasabi get successful');\n      return JSON.parse(response.Body.toString());\n    } catch (error) {\n      // If the object doesn't exist, return null instead of throwing an error\n      if (error.code === 'NoSuchKey') {\n        console.log('Key not found in Wasabi, returning null');\n        return null;\n      }\n      console.error('Detailed error getting from Wasabi:', error.message, error.code, error.statusCode);\n      // Don't fall back to localStorage\n      throw new Error(`Failed to get data from Wasabi: ${error.message}`);\n    }\n  }\n  \n  // Update specific data in Wasabi\n  async updateData(key, updateFunction) {\n    let data = await this.getData(key);\n    \n    // If data doesn't exist yet, initialize with empty object or array\n    if (!data) {\n      data = typeof updateFunction(null) === 'object' ? {} : [];\n    }\n    \n    // Apply the update function to modify the data\n    const updatedData = updateFunction(data);\n    \n    // Save the updated data back to Wasabi\n    return await this.saveData(key, updatedData);\n  }\n  \n  // Delete data from Wasabi\n  async deleteData(key) {\n    // Add folder prefix to the key\n    const fullKey = this.folder + key;\n    \n    // Never use localStorage\n    try {\n      console.log(`Attempting to delete data from Wasabi. Key: ${fullKey}, Bucket: ${this.bucket}`);\n      const params = {\n        Bucket: this.bucket,\n        Key: fullKey,\n      };\n      \n      const response = await this.s3.deleteObject(params).promise();\n      console.log('Wasabi delete successful:', response);\n      return { success: true, response };\n    } catch (error) {\n      console.error('Detailed error deleting from Wasabi:', error.message, error.code, error.statusCode);\n      // Don't fall back to localStorage\n      throw new Error(`Failed to delete from Wasabi: ${error.message}`);\n    }\n  }\n\n  async listObjects(prefix) {\n    const data = await this.s3.listObjectsV2({\n      Bucket: this.bucket,\n      Prefix: prefix\n    }).promise();\n    return data.Contents;\n  }\n\n  async deleteObject(key) {\n    await this.s3.deleteObject({\n      Bucket: this.bucket,\n      Key: key\n    }).promise();\n  }\n}\n\n// Create and export a singleton instance\nconst wasabiStorage = new WasabiStorage();\nexport default wasabiStorage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}